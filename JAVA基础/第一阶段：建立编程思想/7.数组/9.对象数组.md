## ç¬¬1éƒ¨åˆ†ï¼šå»ºç«‹è®¤çŸ¥ï¼ˆWhat & Whyï¼‰

### ğŸ“¦ 1.1 æ ¸å¿ƒåŸç† *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**æ ¸å¿ƒå®šä¹‰**ï¼š
å¯¹è±¡æ•°ç»„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ª**å¼•ç”¨ï¼ˆReferenceï¼‰çš„å®¹å™¨**ã€‚

* **åŸºæœ¬ç±»å‹æ•°ç»„ (`int[]`)**ï¼šç›’å­é‡Œç›´æ¥è£…çš„æ˜¯**æ•°å€¼**ï¼ˆå¦‚ `10`, `20`ï¼‰ã€‚
* **å¯¹è±¡æ•°ç»„ (`User[]`)**ï¼šç›’å­é‡Œè£…çš„**ä¸æ˜¯å¯¹è±¡æœ¬èº«**ï¼Œè€Œæ˜¯æŒ‡å‘å¯¹è±¡çš„**åœ°å€ï¼ˆé¥æ§å™¨/é’¥åŒ™ï¼‰**ã€‚

**ç”Ÿæ´»æ¯”å–»**ï¼š

* **å¯¹è±¡æ•°ç»„**å°±åƒä¸€ä¸ª**é…’åº—å‰å°çš„é’¥åŒ™æŒ‚æ¿**ã€‚
* æŒ‚æ¿ä¸ŠæŒ‚çš„ä¸æ˜¯"æˆ¿é—´"ï¼Œè€Œæ˜¯"æˆ¿é—´é’¥åŒ™"ã€‚
* åˆšä¹°å›æ¥çš„æŒ‚æ¿ï¼ˆåˆš `new` å‡ºæ¥çš„æ•°ç»„ï¼‰ï¼Œä¸Šé¢æ˜¯ç©ºçš„ï¼ˆå…¨æ˜¯ `null`ï¼‰ï¼Œä½ ä¸èƒ½æ‹¿ç€ç©ºæ°”å»å¼€é—¨ã€‚

### âš™ï¸ 1.2 å†…å­˜æ¨¡å‹ (ASCII å›¾è§£) *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

è¿™æ˜¯ç†è§£å¯¹è±¡æ•°ç»„æœ€é‡è¦çš„ä¸€å¼ å›¾ã€‚

å‡è®¾ä»£ç ï¼š

```java
Product[] products = new Product[3]; // 1. åˆ›å»ºæ•°ç»„å®¹å™¨
products[0] = new Product("æ‰‹æœº");    // 2. åˆ›å»ºå¯¹è±¡å¹¶æŒ‚ä¸Šé’¥åŒ™

```

**å†…å­˜å¸ƒå±€**ï¼š

```text
Stack (æ ˆ)               Heap (å †)
+-------------+         +-------------------------+
| products    |------>  | [0] | [1] | [2]         |  <-- è¿™æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡
| (å¼•ç”¨/åœ°å€) |         |  |  | null| null        |
+-------------+         +--|----------------------+
                           |
                           v  (æŒ‡å‘å®é™…å¯¹è±¡)
                        +-----------------+
                        | Productå®ä¾‹     |
                        | name: "æ‰‹æœº"    |
                        +-----------------+

```

**å…³é”®ç‚¹**ï¼š

1. æ‰§è¡Œ `new Product[3]` æ—¶ï¼ŒJava åªæ˜¯åœ¨å †é‡Œå¼€è¾Ÿäº† **3 ä¸ªç©ºæ ¼å­**ã€‚
2. è¿™ 3 ä¸ªæ ¼å­é»˜è®¤å¡«æ»¡ `null`ã€‚
3. **çœŸæ­£çš„å¯¹è±¡**ï¼ˆProductå®ä¾‹ï¼‰è¿˜æ²¡æœ‰äº§ç”Ÿï¼å¿…é¡»æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ª `new` å‡ºæ¥å¡è¿›å»ã€‚

---

### ğŸš€ 1.3 å¿«é€Ÿä¸Šæ‰‹ *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**åœºæ™¯**ï¼šç®¡ç†ç”µå•†è´­ç‰©è½¦é‡Œçš„å•†å“åˆ—è¡¨ã€‚

```java
class Product {
    String name;
    double price;

    public Product(String name, double price) {
        this.name = name;
        this.price = price;
    }
}

public class CartDemo {
    public static void main(String[] args) {
        // æ­¥éª¤1ï¼šå£°æ˜å¹¶åˆ›å»º"é’¥åŒ™æŒ‚æ¿"ï¼ˆé•¿åº¦ä¸º3ï¼‰
        Product[] cart = new Product[3];

        // æ­¥éª¤2ï¼šå¡«å…¥å¯¹è±¡ï¼ˆå¿…é¡»åšï¼å¦åˆ™æ˜¯ nullï¼‰
        cart[0] = new Product("æœºæ¢°é”®ç›˜", 399.0);
        cart[1] = new Product("ç”µç«é¼ æ ‡", 199.0);
        // cart[2] ä¿æŒä¸º null

        // æ­¥éª¤3ï¼šéå†ä½¿ç”¨
        for (int i = 0; i < cart.length; i++) {
            // âš ï¸ å¿…é¡»åˆ¤æ–­ nullï¼Œå¦åˆ™å¦‚æœæ•°ç»„æ²¡å¡«æ»¡ä¼šæŠ¥é”™
            if (cart[i] != null) {
                System.out.println("å•†å“: " + cart[i].name);
            }
        }
    }
}

```

---

## é˜¶æ®µ2ï¼šå·¥ç¨‹å®è·µï¼ˆHow to Do Rightï¼‰

### ğŸ” å‰ç½®çŸ¥è¯†æ£€æŸ¥

**Java é›†åˆæ¡†æ¶ (Collections)**ï¼š
åœ¨çœŸå®å·¥ç¨‹ä¸­ï¼ŒåŸç”Ÿæ•°ç»„ï¼ˆArrayï¼‰å…¶å®ç”¨å¾—è¶Šæ¥è¶Šå°‘ï¼Œæ›´å¤šä½¿ç”¨ `ArrayList`ã€‚ä½†åœ¨ä»¥ä¸‹åœºæ™¯æˆ‘ä»¬**å¿…é¡»**æŒæ¡æ•°ç»„ï¼š

1. **åº•å±‚å¼€å‘**ï¼šä½ è‡ªå·±å†™åº“æˆ–æ¡†æ¶ã€‚
2. **æ€§èƒ½æåº¦æ•æ„Ÿ**ï¼šæ•°ç»„æ¯” ArrayList å°‘ä¸€å±‚å°è£…ï¼Œç¨å¾®å¿«ä¸€ç‚¹ç‚¹ã€‚
3. **ç¡®å®šé•¿åº¦**ï¼šæ¯”å¦‚ "ä¸€å‘¨åªæœ‰ 7 å¤©"ï¼Œé•¿åº¦æ°¸è¿œä¸å˜ã€‚

---

### âœ… 2.1 åˆå§‹åŒ–è§„èŒƒ *ğŸ”¥ å®æˆ˜å¿…å¤‡*

**ğŸŸ¢ GREENï¼ˆæ¨èé£æ ¼ï¼‰ï¼šé™æ€åˆå§‹åŒ–**
å¦‚æœä½ ä¸€å¼€å§‹å°±çŸ¥é“å†…å®¹ï¼Œç›´æ¥ç”¨å¤§æ‹¬å· `{}`ã€‚

```java
// ç®€æ´ã€å®‰å…¨ã€ä¸æ˜“å‡ºé”™
Product[] hotItems = {
    new Product("A", 10.0),
    new Product("B", 20.0),
    new Product("C", 30.0)
};

```

**ğŸ”´ REDï¼ˆå¼ºåˆ¶é¿å‘ï¼‰ï¼šåˆ†æ­¥åˆå§‹åŒ–çš„éšæ‚£**
å¦‚æœä½ å…ˆ `new Product[10]`ï¼Œç„¶åå¿˜è®°å¡«å€¼ï¼Œæˆ–è€…åªå¡«äº†ä¸€åŠï¼Œåç»­é€»è¾‘éå¸¸å®¹æ˜“å´©ã€‚

---

### ğŸŒ 2.2 çœŸå®åœºæ™¯ï¼šå†³ç­–æ ‘ï¼ˆç”¨æ•°ç»„è¿˜æ˜¯ ArrayListï¼Ÿï¼‰

åœ¨ Java 17+ çš„ç°ä»£å·¥ç¨‹ä¸­ï¼Œè¯·éµå¾ªä»¥ä¸‹å†³ç­–ï¼š

| éœ€æ±‚ç‰¹å¾ | æ¨èé€‰æ‹© | ç†ç”± |
| --- | --- | --- |
| **å®¹é‡ä¸ç¡®å®š** (å¦‚ç”¨æˆ·æ·»åŠ å•†å“) | `ArrayList<Product>` | è‡ªåŠ¨æ‰©å®¹ï¼Œæä¾› `add()`, `remove()` æ–¹æ³• |
| **å®¹é‡å›ºå®š** (å¦‚æœˆä»½ã€æ˜ŸæœŸ) | `Month[]` æˆ– `Enum` | å†…å­˜æ›´ç´§å‡‘ï¼Œè¯­ä¹‰æ›´æ˜ç¡® |
| **åŸºæœ¬ç±»å‹é«˜æ€§èƒ½è®¡ç®—** | `int[]`, `double[]` | é¿å…äº†è£…ç®±/æ‹†ç®±çš„æ€§èƒ½æŸè€— |
| **å¤šç»´æ•°æ®** (å¦‚æ£‹ç›˜ã€çŸ©é˜µ) | `int[][]` | è¯­æ³•æ¯” `List<List<Integer>>` æ›´ç›´è§‚ |

---

## é˜¶æ®µ3ï¼šé¿å‘è¿›é˜¶ï¼ˆWhat to Avoid & Beyondï¼‰

### âš ï¸ 3.1 è‡´å‘½é™·é˜±ï¼šç©ºæŒ‡é’ˆå¼‚å¸¸ (NPE) *ğŸ”¥ å®æˆ˜å¿…å¤‡*

è¿™æ˜¯æ–°æ‰‹ä½¿ç”¨å¯¹è±¡æ•°ç»„æ—¶ **100% ä¼šé‡åˆ°** çš„é”™è¯¯ã€‚

**âŒ é”™è¯¯ä»£ç **ï¼š

```java
public class TrapDemo {
    public static void main(String[] args) {
        // 1. åˆ›å»ºäº†ä¸€ä¸ªèƒ½æ”¾ 5 ä¸ªäººçš„æ•°ç»„
        User[] users = new User[5]; 
        
        // 2. ä»¥ä¸ºæ•°ç»„é‡Œå·²ç»æœ‰å¯¹è±¡äº†ï¼Œç›´æ¥è°ƒç”¨æ–¹æ³•
        // ğŸ’¥ å´©æºƒï¼NullPointerException
        // åŸå› ï¼šusers[0] ç›®å‰æ˜¯ nullï¼Œä½ è¯•å›¾å¯¹ç€"ç©ºæ°”"è°ƒç”¨ getName()
        System.out.println(users[0].getName()); 
    }
}

```

**âœ… ä¿®å¤æ–¹æ¡ˆ**ï¼š
å¿…é¡»ç‰¢è®°ï¼š**æ•°ç»„åˆ›å»º** å’Œ **å…ƒç´ åˆ›å»º** æ˜¯ä¸¤å›äº‹ã€‚

```java
User[] users = new User[5];
// å¿…é¡»å…ˆå®ä¾‹åŒ–å…ƒç´ 
users[0] = new User("Alice"); 
System.out.println(users[0].getName()); // å®‰å…¨

```
