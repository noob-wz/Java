## 1. 设计哲学：为什么需要实例代码块？

既然 Java 提供了清晰的构造器链 (`this()`)，为什么还需要实例代码块？

### 1.1 核心理由：匿名内部类 (Anonymous Inner Class)

实例代码块的设计主要存在两个功能：

* （1）构造器逻辑复用；
* （2）匿名内部类初始化。但是构造器链本身的逻辑更加清晰，所以实例代码块 *“构造器逻辑复用”的作用已经成为过去时*。

其中，**匿名内部类的初始化作用，这是实例代码块存在的最大意义**。

* **问题**：匿名内部类没有类名，因此**无法编写构造器**。
* **解决**：实例代码块成为匿名类初始化的**唯一入口**。

```java
// 场景：初始化一个 Map 并赋值
// 这里使用了双大括号初始化（虽然有内存泄漏风险，但是实例块应用的标准案例）
Map<String, String> map = new HashMap<>() {{
    put("key", "value"); // 这里的代码实际上是在 HashMap 子类的构造阶段执行
}};

```

### 1.2 辅助理由：防御性编程

* **场景**：确保某段逻辑（如“注册全局计数器”）在对象创建时**绝对执行**，无论开发者新增了多少个构造器，或是否遗忘了调用 `this()`。
