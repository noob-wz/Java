### 🌟 什么是可变参数？

**可变参数** ，它允许你在调用 **“方法名和功能相同，参数类型相同但个数不同的”** 的方法封装成一个方法。

简单来说，就是让方法能够接受 $0$ 个、 $1$ 个、$2$ 个，甚至更多个参数，而无需为每一种可能的参数数量都编写一个重载方法。

#### 1\. 语法表示

可变参数是通过 **在参数类型后面添加 三个点 (`...`)** 来表示的。

```java
// 语法： 类型... 参数名
public void printScores(String name, int... scores) {
    // ...
}
```

#### 2\. 底层原理：数组 (Array)

虽然**在代码中你传入的是多个独立的参数，但 Java 编译器在编译时，会悄悄地将这些可变参数封装成一个数组**。

- 当你调用 `printScores("Alice", 90, 85, 95)` 时：
  - 编译器实际上会创建一个 `int[]` 数组，包含 `{90, 85, 95}`。
  - 在方法内部，你**可以直接将 `scores` 作为一个 `int[]` 数组来操作**。

### 🛠️ 为什么使用可变参数？(设计目的)

可变参数的引入，主要是为了简化 **方法重载** 的工作，提高代码的灵活性和可读性。

- **没有 Varargs 之前：** 如果你需要一个 `add` 方法可以计算 2 个数、 3 个数或 4 个数的和，你需要编写三个重载版本：

  ```java
  public int add(int a, int b) {...}
  public int add(int a, int b, int c) {...}
  public int add(int a, int b, int c, int d) {...}
  ```

- **使用 Varargs 之后：** 只需要一个方法，就能处理所有情况：

  ```java
  // 只需要一个方法签名
  public int add(int... numbers) {
      int sum = 0;
      for (int num : numbers) { // 在方法内部，numbers 就是一个数组
          sum += num;
      }
      return sum;
  }
  ```

### 💻 代码示例

```java
public class VarargsDemo {

    // 接受可变数量的整数参数
    public static int sum(int... numbers) {
        int total = 0;
        // numbers 在这里被当作 int[] 数组使用
        for (int num : numbers) {
            total += num;
        }
        return total;
    }

    public static void main(String[] args) {
        // 传入 0 个参数
        System.out.println("Sum (0 args): " + sum()); // 输出: 0

        // 传入 3 个参数
        System.out.println("Sum (3 args): " + sum(10, 20, 30)); // 输出: 60

        // 传入 5 个参数
        System.out.println("Sum (5 args): " + sum(1, 2, 3, 4, 5)); // 输出: 15
    }
}
```

### ⚠️ 使用限制与规范

为了避免歧义和保证编译器的顺利工作，可变参数在使用上有两个严格的限制：

1.  **一个方法只能有一个可变参数。**

    - ❌ 错误：`public void test(int... a, String... b)`

2.  **可变参数必须是参数列表中的最后一个参数。**

    - ❌ 错误：`public void test(int... a, String b)`
    - ✅ 正确：`public void test(String name, int... scores)` (先是 `name`，后是 `scores`)
    - _原因：_ 编译器需要确定在参数列表中，哪里是固定参数的结束，哪里是可变参数的开始。

3.  **可变参数的实参可以为 0 个或任意多个**
4.  **可变参数的实参可以为数组**。因为可变参数内部就是被当成一个数组来处理的，所以编译器允许直接传入一个数组。但是，必须传入的是数组的引用，换句话说是提前存好的数据。

    ```java
    // 编译错误！
    sum({80, 90, 100});
    // 编译器会报错，因为在Java中它无法判断 {80, 90, 100} 到底是什么类型（是 int[] 还是 double[] 还是其他）。
    // Java是强类型语言，规定：{...} (Array Initializer) 只能出现在变量声明的等号右边。此时才会知道他属于什么类型

    // 正确方式
    // 方式1: 明确告诉编译器这是一个新的 int 数组
    sum(new int[]{80, 90, 100});
    // 方法2: 提前存好数组
    int[] myScores = {80, 90, 100};
    sum(myScores); // 合法！myScores 数组被直接赋值给方法内的 numbers 引用。
    ```
