## ç¬¬1éƒ¨åˆ†ï¼šå»ºç«‹è®¤çŸ¥ (What & Why)

### ğŸ“¦ 1.1 æ€ä¹ˆå†™ï¼šæ ¸å¿ƒè¯­æ³• *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**ç›®æ ‡**ï¼š**æŒæ¡**æ¥å£çš„å®šä¹‰è§„åˆ™ï¼Œ**ç†è§£**ç¼–è¯‘å™¨èƒŒåçš„"éšå¼ä¿®é¥°ç¬¦"ã€‚

æ¥å£ä¸æ˜¯ç±»ï¼Œå®ƒæ˜¯ä¸€ç§**è§„èŒƒ**ã€‚å®ƒåªç®¡å®šä¹‰ **"è¦åšä»€ä¹ˆ"**ï¼Œå®Œå…¨ä¸ç®¡ **"æ€ä¹ˆåš"**ã€‚

**åŸºç¡€è¯­æ³•ç»“æ„**ï¼š

```java
// 1. ä½¿ç”¨ interface å…³é”®å­— (æ³¨æ„ä¸æ˜¯ class)
public interface Usb {

    // âœ… å…¨å±€å¸¸é‡ (æˆå‘˜å˜é‡)
    // éšå¼è§„åˆ™ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Š public static final
    // å«ä¹‰ï¼šæ¥å£é‡Œçš„å˜é‡å¿…é¡»æ˜¯å¸¸é‡ï¼Œæ¯”å¦‚ USB çš„ç”µå‹æ ‡å‡†
    double VOLTAGE = 5.0; 

    // âœ… æŠ½è±¡æ–¹æ³• (è¡Œä¸ºè§„èŒƒ)
    // éšå¼è§„åˆ™ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Š public abstract
    // å«ä¹‰ï¼šå®ç°æˆ‘çš„ç±»ï¼Œå¿…é¡»å…·å¤‡è¿™ä¸¤ä¸ªåŠŸèƒ½
    void connect();
    void transferData();
    
    // âœ… é»˜è®¤æ–¹æ³•
    // éšå¼è§„åˆ™ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Š public
    // å«ä¹‰ï¼šå®ç°æˆ‘çš„ç±»å¦‚æœæ²¡æœ‰é‡å†™ï¼Œåˆ™é»˜è®¤æŒ‰è¿™ä¸ªæ–¹æ³•å®ç°
    // æ³¨æ„ï¼šdefaultåœ¨æ¥å£ä¸­ä¸ä»£è¡¨è®¿é—®æƒé™ï¼Œè€Œæ˜¯é»˜è®¤å®ç°ã€‚æ‰€ä»¥å’Œ public å…³é”®å­—ä¸å†²çªï¼Œå¦‚æœä¸å†™ï¼Œç¼–è¯‘å™¨é»˜è®¤æ·»åŠ 
    default void say() {
        System.out.println("æˆ‘æ˜¯é»˜è®¤æ–¹æ³•ï¼Œå¦‚æœä¸é‡å†™ä¿æŒè¯¥é€»è¾‘...");
    }

    // âœ… é™æ€æ–¹æ³•1
    // éšå¼è§„åˆ™ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Š public
    // å«ä¹‰ï¼šæ‰€æœ‰çš„ç±»éƒ½å¯ä»¥ä½¿ç”¨æˆ‘çš„addæ–¹æ³•
    static void add() {
        System.out.println("publicé™æ€æ–¹æ³•ï¼Œå…¨ä¸–ç•Œå¯ç”¨...");
        find();
    }

    // âœ… é™æ€æ–¹æ³•2
    // æ˜¾å¼ private
    // å¦‚æœæ˜¯ç±»çš„é™æ€æ–¹æ³•ï¼Œå­ç±»æ˜¯å¯ä»¥ç»§æ‰¿å¹¶è°ƒç”¨çš„ï¼Œç”šè‡³å¯ä»¥ç”¨å¯¹è±¡å®ä¾‹å»ç‚¹ï¼ˆè™½ç„¶ä¸æ¨èï¼‰ã€‚ ä½†åœ¨æ¥å£é‡Œï¼Œé™æ€æ–¹æ³•å±äºæ¥å£çš„â€œç§æœ‰é¢†åœ°â€ï¼Œå®ç°ç±»æ ¹æœ¬æ‹¿ä¸åˆ°ï¼
    // å«ä¹‰ï¼šåªç»™æ¥å£å†…éƒ¨çš„å…¶ä»– static æ–¹æ³•å¤ç”¨ï¼Œä¸å¯¹å¤–æš´éœ²
    private static void find() {
        System.out.println("privateé™æ€æ–¹æ³•ï¼Œåªç»™æ¥å£å†…éƒ¨çš„å…¶ä»– static æ–¹æ³•å¤ç”¨...");
    }
}

```

**å®ç°æ¥å£ (Implements)**ï¼š
ç±»ä¸æ¥å£çš„å…³ç³»ä¸å†æ˜¯"ç»§æ‰¿" (`extends`)ï¼Œè€Œæ˜¯"å®ç°" (`implements`)ã€‚ä¸€ä¸ªç±»å¯ä»¥å®ç°**å¤šä¸ª**æ¥å£ï¼ˆè§£å†³äº† Java å•ç»§æ‰¿çš„å±€é™ï¼‰ã€‚

```java
// é¼ æ ‡å®ç° USB è§„èŒƒ
// å¿…é¡»å®ç°æ¥å£ä¸­æ‰€æœ‰æŠ½è±¡æ–¹æ³•
public class Mouse implements Usb {
    @Override
    public void connect() {
        System.out.println("é¼ æ ‡å·²è¿æ¥");
    }

    @Override
    public void transferData() {
        System.out.println("é¼ æ ‡å‘é€åæ ‡æ•°æ®...");
    }
}

```

**æ¥å£è¯­æ³•é“å¾‹**ï¼š

1. **ä¸èƒ½å®ä¾‹åŒ–**ï¼š`new Usb()` âŒ æ˜¯éæ³•çš„ã€‚
2. **éšå¼ Public**ï¼šæ¥å£é‡Œçš„æ–¹æ³•é»˜è®¤éƒ½æ˜¯ `public` çš„ã€‚å®ç°ç±»é‡å†™æ—¶ï¼Œ**å¿…é¡»æ˜¾å¼åŠ ä¸Š `public` ä¿®é¥°ç¬¦**ï¼ˆå› ä¸ºå­ç±»æƒé™ä¸èƒ½å°äºçˆ¶ç±»ï¼ŒJava é»˜è®¤æƒé™å°äº publicï¼‰ã€‚
3. æŠ½è±¡ç±»å®ç°æ¥å£æ—¶ï¼Œå¯ä»¥ä¸ç”¨å®ç°æ¥å£çš„æ–¹æ³•
4. æ¥å£ä¸èƒ½ç»§æ‰¿å…¶ä»–çš„ç±»ï¼Œä½†æ˜¯ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å…¶ä»–å¤šä¸ªæ¥å£ `interface A extends B, C {}`
5. æ¥å£çš„ä¿®é¥°ç¬¦åªèƒ½æ˜¯ `public` å’Œ é»˜è®¤ï¼Œè¿™å’Œç±»æ˜¯ä¸€è‡´çš„

---

### ğŸ”— 1.2 æ‡‚åŸç†ï¼šéšå¼ä¿®é¥°ç¬¦ä¸å¤šç»§æ‰¿ *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**ç›®æ ‡**ï¼š**é€è§†**ç¼–è¯‘å™¨çš„è‡ªåŠ¨è¡Œä¸ºï¼Œ**ç†è§£**æ¥å£å¦‚ä½•çªç ´å•ç»§æ‰¿é™åˆ¶ã€‚

#### 1. ç¼–è¯‘å™¨çš„"è‡ªåŠ¨è¡¥å…¨"

å¾ˆå¤šæ–°æ‰‹å†™æ¥å£æ—¶å¾ˆéšæ„ï¼Œä½†ç¼–è¯‘å™¨å¾ˆä¸¥æ ¼ã€‚

```java
public interface Demo {
    int MAX = 100;       // å®é™…æ˜¯: public static final int MAX = 100;
    void run();          // å®é™…æ˜¯: public abstract void run();
}

```

* **ä¸ºä»€ä¹ˆå˜é‡å¿…é¡»æ˜¯å¸¸é‡ï¼Ÿ** æ¥å£æ²¡æœ‰æ„é€ å™¨ï¼Œæ— æ³•åˆå§‹åŒ–å˜é‡ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯é™æ€å¸¸é‡ï¼Œä½œä¸ºæ‰€æœ‰å®ç°ç±»çš„å…±äº«æ ‡å‡†ã€‚

#### 2. å¤šç»§æ‰¿çš„çœŸç›¸ (The Power of "Like-A")

Java çš„ç±»åªèƒ½æœ‰ä¸€ä¸ªäº²çˆ¹ï¼ˆ`extends`ï¼‰ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªæŠ€èƒ½è¯ä¹¦ï¼ˆ`implements`ï¼‰ã€‚

**ASCII å…³ç³»å›¾**ï¼š

```
       [æŠ½è±¡ç±»: Animal] (åŸºå› /Is-A)
              ^
              | extends
       +--------------+
       |   SuperDog   |
       +--------------+
         ^    ^    ^
         |    |    | implements
[æ¥å£: Pet] [æ¥å£: Hunter] [æ¥å£: Swimmer]
 (å® ç‰©è§„èŒƒ)   (æ•çŒè§„èŒƒ)    (æ¸¸æ³³è§„èŒƒ)

```

* `SuperDog` **æ˜¯** åŠ¨ç‰©ï¼ŒåŒæ—¶ **èƒ½** åšå® ç‰©ï¼Œ**èƒ½** æ•çŒï¼Œ**èƒ½** æ¸¸æ³³ã€‚

---

### ğŸš€ 1.3 å¿«é€Ÿä¸Šæ‰‹è·‘èµ·æ¥ï¼šUSB æ’æ§½æ¡ˆä¾‹ *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**ç›®æ ‡**ï¼š**æ¨¡æ‹Ÿ**ç”µè„‘ä¸å¤–è®¾çš„è§£è€¦ï¼Œ**ä½“éªŒ**æ¥å£å¸¦æ¥çš„çµæ´»æ€§ã€‚

```java
// 1. å®šä¹‰æ¥å£ï¼ˆæ ‡å‡†ï¼‰
interface Usb {
    void work();
}

// 2. å®ç°ç±»ï¼ˆå…·ä½“çš„ç¡¬ä»¶ï¼‰
class Keyboard implements Usb {
    public void work() {
        System.out.println("âŒ¨ï¸ é”®ç›˜å¼€å§‹è¾“å…¥æ–‡å­—");
    }
}

class Camera implements Usb {
    public void work() {
        System.out.println("ğŸ“¸ æ‘„åƒå¤´å¼€å§‹é‡‡é›†å›¾åƒ");
    }
}

// 3. æ ¸å¿ƒä¸šåŠ¡ç±»ï¼ˆç”µè„‘ï¼‰
class Computer {
    // âš ï¸ å…³é”®ç‚¹ï¼šè¿™é‡Œå‚æ•°å†™çš„æ˜¯ Usb æ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ Keyboard
    // è¿™å« "é¢å‘æ¥å£ç¼–ç¨‹"
    public void plugIn(Usb device) {
        System.out.println("æ£€æµ‹åˆ° USB è®¾å¤‡æ’å…¥...");
        device.work(); // å¤šæ€è°ƒç”¨
    }
}

// 4. æµ‹è¯•
public class InterfaceDemo {
    public static void main(String[] args) {
        Computer macbook = new Computer();
        
        // æ’å…¥é”®ç›˜
        macbook.plugIn(new Keyboard());
        
        // æ’å…¥æ‘„åƒå¤´
        macbook.plugIn(new Camera());
        
        // æ‰©å±•æ€§ï¼šå¦‚æœæ˜å¤©å‘æ˜äº† USB é£æ‰‡ï¼ŒComputer ç±»ä¸€è¡Œä»£ç éƒ½ä¸ç”¨æ”¹ï¼
        // åªéœ€è¦æ–°å»ºä¸€ä¸ª Fan ç±»å®ç° Usb æ¥å£å³å¯ã€‚
    }
}

```

---

### ğŸ’¡ 1.4 ä¸ºä»€ä¹ˆï¼šæŠ½è±¡ç±» vs æ¥å£ (ç»ˆæå¯¹æ¯”) *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**ç›®æ ‡**ï¼š**åŒºåˆ†**ä¸¤è€…çš„æ ¸å¿ƒè¯­ä¹‰ï¼Œ**é˜²æ­¢**è®¾è®¡å±‚é¢çš„æ»¥ç”¨ã€‚

è¿™æ˜¯é¢è¯•å’Œæ¶æ„è®¾è®¡ä¸­æœ€å¸¸é—®çš„é—®é¢˜ã€‚

| ç»´åº¦ | æŠ½è±¡ç±» (Abstract Class) | æ¥å£ (Interface) |
| --- | --- | --- |
| **æ ¸å¿ƒè¯­ä¹‰** | **Is-A (æ˜¯ä¸æ˜¯)** | **Can-Do (èƒ½ä¸èƒ½)** |
| **è®¾è®¡ç›®çš„** | ä»£ç å¤ç”¨ï¼Œæ¨¡æ¿ä¸éª¨æ¶ | **è§£è€¦**ï¼Œå®šä¹‰è§„èŒƒä¸äº¤äº’ |
| **çŠ¶æ€ç®¡ç†** | âœ… å¯ä»¥æœ‰æ™®é€šæˆå‘˜å˜é‡ | âŒ åªèƒ½æœ‰å¸¸é‡ (`static final`) |
| **æ„é€ å™¨** | âœ… æœ‰ (ä¾›å­ç±»åˆå§‹åŒ–) | âŒ æ—  |
| **æ–¹æ³•å®ç°** | âœ… å¯ä»¥æœ‰æ™®é€šæ–¹æ³• | âš ï¸ Java 8 å‰å…¨æŠ½è±¡ï¼Œ8 åæœ‰ default |
| **ç»§æ‰¿æ•°é‡** | âŒ å•ç»§æ‰¿ | âœ… **å¤šå®ç°** |

**ä¸€å¥è¯å†³ç­–**ï¼š

* å¦‚æœä½ éœ€è¦**å¤ç”¨ä»£ç **æˆ–è€…**æ§åˆ¶ç»§æ‰¿ä½“ç³»**ï¼Œç”¨æŠ½è±¡ç±»ã€‚
* å¦‚æœä½ éœ€è¦**å®šä¹‰äº¤äº’æ ‡å‡†**æˆ–è€…**è®©ä¸åŒç±»å‹çš„ç±»å…·å¤‡ç›¸åŒèƒ½åŠ›**ï¼Œç”¨æ¥å£ã€‚

---

## ç¬¬2éƒ¨åˆ†ï¼šå·¥ç¨‹å®è·µ (How to Do Right)

æŒæ¡äº†æ¥å£çš„è¯­æ³•åªæ˜¯ç¬¬ä¸€æ­¥ã€‚åœ¨çœŸå®çš„å¤§å‚å·¥ç¨‹å¼€å‘ä¸­ï¼Œæ¥å£çš„æ ¸å¿ƒä»·å€¼åœ¨äº**è®¾è®¡**ã€‚

è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç”¨æ¥å£å®ç° **"ä¾èµ–å€’ç½®"**ï¼Œä»¥åŠ Java 8 æ˜¯å¦‚ä½•é€šè¿‡ `default` æ–¹æ³•è§£å†³ç”±äºæ¥å£å‡çº§å¼•å‘çš„"ç¾éš¾"çš„ã€‚

---

### ğŸŒ 2.1 çœŸå®åœºæ™¯ï¼šä¾èµ–å€’ç½®åŸåˆ™ (DIP) *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**ç›®æ ‡**ï¼š**åº”ç”¨**"é¢å‘æ¥å£ç¼–ç¨‹"æ€æƒ³ï¼Œ**è§£é™¤**ä¸šåŠ¡é€»è¾‘ä¸å…·ä½“å®ç°çš„è€¦åˆã€‚

**åœºæ™¯**ï¼šä½ è¦å¼€å‘ä¸€ä¸ªæ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿã€‚ç›®å‰åªéœ€è¦å‘é‚®ä»¶ï¼Œä½†æœªæ¥å¯èƒ½ä¼šå‘çŸ­ä¿¡ã€å‘å¾®ä¿¡ã€‚

**âŒ èœé¸Ÿå†™æ³• (è€¦åˆå…·ä½“å®ç°)**ï¼š
ä¸šåŠ¡å±‚ç›´æ¥ä¾èµ–äº†å…·ä½“çš„ `EmailSender` ç±»ã€‚

```java
class OrderService {
    // ğŸ’€ è‡´å‘½æ­»ç©´ï¼šç›´æ¥ new äº†å…·ä½“çš„ EmailSender
    // å¦‚æœæ˜å¤©è€æ¿è¦æ”¹æˆå‘çŸ­ä¿¡ï¼Œä½ å¾—æ”¹ OrderService çš„ä»£ç ï¼
    // è¿™è¿åäº† "å¼€é—­åŸåˆ™" (å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­)ã€‚
    private EmailSender sender = new EmailSender();

    public void placeOrder() {
        // ... è®¢å•é€»è¾‘
        sender.send("è®¢å•æˆåŠŸ");
    }
}

```

**âœ… å·¥ç¨‹å¸ˆå†™æ³• (ä¾èµ–å€’ç½®)**ï¼š
ä¸šåŠ¡å±‚åªä¾èµ– `MessageSender` æ¥å£ã€‚å…·ä½“ç”¨ä»€ä¹ˆå‘ï¼Œç”±å¤–éƒ¨å†³å®šã€‚

**ASCII ä¾èµ–å›¾**ï¼š

```
[OrderService] --> [æ¥å£: MessageSender] <--- [EmailSender]
                                         <--- [SmsSender]

```

*æ³¨æ„ï¼šç®­å¤´æŒ‡å‘æ¥å£ï¼ŒOrderService ä¸å†ä¾èµ–å…·ä½“ Senderã€‚*

```java
// 1. å®šä¹‰æ¥å£
interface MessageSender {
    void send(String msg);
}

// 2. å…·ä½“å®ç°
class EmailSender implements MessageSender {
    public void send(String msg) { System.out.println("ğŸ“§ é‚®ä»¶å‘é€: " + msg); }
}

class SmsSender implements MessageSender {
    public void send(String msg) { System.out.println("ğŸ“± çŸ­ä¿¡å‘é€: " + msg); }
}

// 3. ä¸šåŠ¡é€»è¾‘ (è§£è€¦)
class OrderService {
    // âœ… å…³é”®ç‚¹ï¼šè¿™é‡Œå£°æ˜çš„æ˜¯æ¥å£ç±»å‹
    private MessageSender sender;

    // âœ… é€šè¿‡æ„é€ å™¨æ³¨å…¥å…·ä½“çš„å®ç° (ä¾èµ–æ³¨å…¥æ€æƒ³)
    // OrderService ä¸å…³å¿ƒæ˜¯è°å‘æ¶ˆæ¯ï¼Œåªè¦èƒ½å‘å°±è¡Œ
    public OrderService(MessageSender sender) {
        this.sender = sender;
    }

    public void placeOrder() {
        sender.send("è®¢å•æˆåŠŸ");
    }
}

// 4. ç»„è£… (Config)
public class DipDemo {
    public static void main(String[] args) {
        // ä»Šå¤©æƒ³å‘é‚®ä»¶
        OrderService service1 = new OrderService(new EmailSender());
        service1.placeOrder();

        // æ˜å¤©æƒ³å‘çŸ­ä¿¡ -> OrderService ä¸€è¡Œä»£ç éƒ½ä¸ç”¨æ”¹ï¼
        OrderService service2 = new OrderService(new SmsSender());
        service2.placeOrder();
    }
}

```

---

### ğŸ”„ 2.2 ç‰ˆæœ¬æ¼”è¿›ï¼šé»˜è®¤æ–¹æ³• (Default Methods) *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

> JDK 7 ä»¥å‰ï¼Œæ¥å£é‡Œçš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ã€‚JDK 8 ä¹‹åï¼Œæ¥å£å¯ä»¥æœ‰é™æ€æ–¹æ³•ã€é»˜è®¤æ–¹æ³•ï¼Œä¹Ÿå°±è¯´ï¼Œæ¥å£å¯ä»¥æœ‰æ–¹æ³•çš„å…·ä½“å®ç°

åœ¨ Java 8 ä¹‹å‰ï¼Œæ¥å£å‡çº§æ˜¯ä¸€åœº**ç¾éš¾**ã€‚

#### ğŸŒ© å†å²ç—›ç‚¹ï¼šæ¥å£æ±¡æŸ“

å‡è®¾ä½ å‘å¸ƒäº†ä¸€ä¸ªå¼€æºåº“ï¼Œæœ‰ä¸€ä¸ªæ¥å£ `MyInterface`ï¼Œè¢«å…¨ä¸–ç•Œ 10,000 ä¸ªé¡¹ç›®å®ç°äº†ã€‚
çªç„¶æœ‰ä¸€å¤©ï¼Œä½ æƒ³ç»™è¿™ä¸ªæ¥å£å¢åŠ ä¸€ä¸ªæ–°æ–¹æ³• `newMethod()`ã€‚

* **åæœ**ï¼šé‚£ 10,000 ä¸ªé¡¹ç›®å…¨éƒ¨æŠ¥é”™ï¼å› ä¸ºå®ƒä»¬çš„å®ç°ç±»é‡Œæ²¡æœ‰å®ç° `newMethod()`ã€‚

#### âœ… Java 8 çš„æ•‘ä¸–ä¸»ï¼š`default`

Java 8 å…è®¸åœ¨æ¥å£ä¸­å®šä¹‰**å¸¦æ–¹æ³•ä½“**çš„æ–¹æ³•ï¼Œä½¿ç”¨ `default` å…³é”®å­—ä¿®é¥°ã€‚
**å®ƒè¡¨ç¤ºï¼šå¦‚æœå®ç°ç±»ä¸é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œå°±ä½¿ç”¨è¿™é‡Œçš„é»˜è®¤é€»è¾‘ã€‚**

```java
public interface Payment {
    void pay();

    // ğŸ†• æ–°å¢åŠŸèƒ½ï¼šæ‰“å°æ”¶æ®
    // ä½¿ç”¨ defaultï¼Œä¸ä¼šç ´åç°æœ‰çš„å®ç°ç±»ï¼
    // ç°æœ‰çš„ç±»å³ä½¿ä¸æ”¹ä»£ç ï¼Œä¹Ÿèƒ½è‡ªåŠ¨æ‹¥æœ‰ printReceipt çš„èƒ½åŠ›ã€‚
    default void printReceipt() {
        System.out.println("æ‰“å°æ ‡å‡†ç”µå­å›å•...");
    }
}

class AliPay implements Payment {
    public void pay() { System.out.println("æ”¯ä»˜å®æ‰£æ¬¾"); }
    // æ²¡é‡å†™ printReceiptï¼Œç›´æ¥ç»§æ‰¿æ¥å£çš„é€»è¾‘
}

class WeChatPay implements Payment {
    public void pay() { System.out.println("å¾®ä¿¡æ‰£æ¬¾"); }
    
    // ä¹Ÿå¯ä»¥é€‰æ‹©é‡å†™ï¼Œè¦†ç›–é»˜è®¤é€»è¾‘
    @Override
    public void printReceipt() {
        System.out.println("å‘é€å¾®ä¿¡æœåŠ¡é€šçŸ¥");
    }
}

```

**âš ï¸ å†²çªé™·é˜±ï¼šå¤šå®ç°æ—¶çš„äºŒä¹‰æ€§**
å¦‚æœä¸€ä¸ªç±»å®ç°äº†ä¸¤ä¸ªæ¥å£ï¼Œè¿™ä¸¤ä¸ªæ¥å£éƒ½æœ‰åŒåçš„ `default` æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šæ™•ï¼š**"æˆ‘è¯¥å¬è°çš„ï¼Ÿ"**

```java
interface A {
    default void hello() { System.out.println("A"); }
}

interface B {
    default void hello() { System.out.println("B"); }
}

// âŒ ç¼–è¯‘æŠ¥é”™ï¼šDuplicate default methods named hello
class C implements A, B {
    // å¿…é¡»é‡å†™ hello() æ¥æ˜ç¡®é€»è¾‘
    @Override
    public void hello() {
        // å¯ä»¥é€‰æ‹©è°ƒç”¨ A çš„é€»è¾‘
        A.super.hello(); 
        // ä¹Ÿå¯ä»¥è‡ªå·±å†™
        // System.out.println("C");
    }
}

```

---

### ğŸ”§ 2.3 å·¥å…·åŒ–ï¼šæ¥å£ä¸­çš„é™æ€æ–¹æ³• (Static Methods)

**ç›®æ ‡**ï¼š**ä½¿ç”¨**æ¥å£ç»„ç»‡å·¥å…·æ–¹æ³•ï¼Œ**æ›¿ä»£**éƒ¨åˆ†å·¥å…·ç±» (`Util` Class)ã€‚

Java 8 ä¹‹åï¼Œæ¥å£é‡Œå¯ä»¥å†™ `static` æ–¹æ³•ã€‚è¿™è®©æ¥å£ä¸ä»…èƒ½å®šä¹‰å®ä¾‹çš„è¡Œä¸ºï¼Œè¿˜èƒ½æä¾›ç›¸å…³çš„å·¥å…·ã€‚

```java
public interface MathOp {
    int operate(int a, int b);

    // ä»¥å‰è¿™ç§æ–¹æ³•è¦ä¸“é—¨å†™ä¸€ä¸ª MathUtils ç±»
    // ç°åœ¨ç›´æ¥æ”¾åœ¨æ¥å£é‡Œï¼Œèšåˆåº¦æ›´é«˜
    static boolean isPositive(int num) {
        return num > 0;
    }
}

// è°ƒç”¨
boolean result = MathOp.isPositive(10); // âœ… ç›´æ¥ç”¨æ¥å£åè°ƒç”¨

```

---

### âš–ï¸ 2.4 æ€ä¹ˆå†™å¥½ï¼šæ¥å£è®¾è®¡è§„èŒƒ *ğŸ”¥ å®æˆ˜å¿…å¤‡*

#### ğŸŸ¢ GREENï¼ˆæ¨èé£æ ¼ï¼‰

1. **æ¥å£å‘½å**ï¼šé€šå¸¸æ˜¯å½¢å®¹è¯ (`Runnable`, `Serializable`) æˆ–åè¯ (`List`, `Map`)ã€‚
2. **å•ä¸€èŒè´£**ï¼šä¸€ä¸ªæ¥å£åªç®¡ä¸€ä»¶äº‹ã€‚ä¸è¦å®šä¹‰ä¸€ä¸ª `SuperInterface` é‡Œé¢æ—¢æœ‰ `login()` åˆæœ‰ `pay()` è¿˜æœ‰ `sendEmail()`ã€‚
3. **ä¼˜å…ˆä½¿ç”¨æ¥å£ç±»å‹**ï¼šå˜é‡å£°æ˜ã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ï¼Œå°½é‡å†™æ¥å£ï¼ˆå¦‚ `List`ï¼‰ï¼Œè€Œä¸æ˜¯å…·ä½“ç±»ï¼ˆå¦‚ `ArrayList`ï¼‰ã€‚

#### ğŸ”´ REDï¼ˆå¼ºåˆ¶è§„èŒƒï¼‰

1. **ä¸è¦æ»¥ç”¨ Default**ï¼š`default` æ–¹æ³•ä¸»è¦ç”¨äº**å‘åå…¼å®¹**ã€‚ä¸è¦æŠŠå®ƒå½“æˆæŠ½è±¡ç±»æ¥ç”¨ï¼å¦‚æœé€»è¾‘å¾ˆå¤æ‚ä¸”åŒ…å«çŠ¶æ€ï¼Œè¯·ç”¨æŠ½è±¡ç±»ã€‚
2. **å¸¸é‡é˜²è…**ï¼šä¸è¦ä»…ä»…ä¸ºäº†å­˜å¸¸é‡è€Œå®šä¹‰æ¥å£ï¼ˆ"å¸¸é‡æ¥å£"æ¨¡å¼æ˜¯åæ¨¡å¼ï¼‰ã€‚åº”è¯¥ç”¨ `Enum` æˆ– `final class`ã€‚

```java
// âŒ åæ¨¡å¼ï¼šå¸¸é‡æ¥å£
interface Constants {
    double PI = 3.14; // è¿™ä¼šæ±¡æŸ“å®ç°ç±»çš„å‘½åç©ºé—´
}

// âœ… æ­£ç¡®åšæ³•
public final class AppConstants {
    public static final double PI = 3.14;
    private AppConstants() {} // é˜²æ­¢å®ä¾‹åŒ–
}

```

---

## ç¬¬3éƒ¨åˆ†ï¼šç°ä»£è¿›åŒ– (Modern Java & Lambda)

è¿™æ˜¯æ¥å£æœ€è¿·äººã€ä¹Ÿæ˜¯è®© Java "é‡è·æ–°ç”Ÿ" çš„ç¯‡ç« ã€‚

ä» Java 8 å¼€å§‹ï¼Œæ¥å£ä¸ä»…ä»…æ˜¯"å¥‘çº¦"ï¼Œå®ƒå˜æˆäº†**è¡Œä¸ºçš„å®¹å™¨**ã€‚è¿™ä¸€è½¬å˜ç›´æ¥å¼•å…¥äº† **Lambda è¡¨è¾¾å¼** å’Œ **å‡½æ•°å¼ç¼–ç¨‹**ï¼Œè®© Java ä»£ç ä»"å•°å—¦"å˜å¾—"ä¼˜é›…"ã€‚

### ğŸ” å‰ç½®çŸ¥è¯†æ£€æŸ¥

1. **åŒ¿åå†…éƒ¨ç±»**ï¼šåœ¨æ²¡æœ‰ Lambda ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸ºäº†å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£ï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ï¼‰ï¼Œä¸å¾—ä¸å†™ä¸€å¨ä¸´æ—¶çš„ç±»å®šä¹‰ä»£ç ã€‚
2. **æ³›å‹ (Generics)**ï¼šæœ¬èŠ‚ä¼šå¤§é‡ä½¿ç”¨ `<T>`, `<R>` ç­‰æ³›å‹ç¬¦å·ï¼Œè¡¨ç¤º"æŸç§ç±»å‹"ã€‚

---

### ğŸ§¬ 3.1 æ ¸å¿ƒæ¦‚å¿µï¼šå‡½æ•°å¼æ¥å£ (Functional Interface) *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**ç›®æ ‡**ï¼š**è¯†åˆ«**ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£ï¼Œ**æŒæ¡** `@FunctionalInterface` æ³¨è§£çš„ä½œç”¨ã€‚

**å®šä¹‰**ï¼šå¦‚æœä¸ç®— default å’Œ static æ–¹æ³•ï¼Œä¸€ä¸ªæ¥å£ä¸­**æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª**æŠ½è±¡æ–¹æ³•ï¼ˆSingle Abstract Method, SAMï¼‰ï¼Œé‚£å®ƒå°±æ˜¯å‡½æ•°å¼æ¥å£ã€‚

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
åªæœ‰å‡½æ•°å¼æ¥å£ï¼Œæ‰èƒ½è¢«éšå¼è½¬æ¢ä¸º **Lambda è¡¨è¾¾å¼**ã€‚

**è¯­æ³•è§„èŒƒ**ï¼š

```java
// âœ… è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£
// ä½œç”¨ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¯·å¸®æˆ‘æ£€æŸ¥ï¼Œè¿™ä¸ªæ¥å£å¿…é¡»"åªèƒ½æœ‰ä¸€ä¸ª"æŠ½è±¡æ–¹æ³•
@FunctionalInterface 
public interface MathOperation {
    
    // å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•
    int operate(int a, int b);

    // âœ… å…è®¸æœ‰ default æ–¹æ³•ï¼ˆä¸è®¡å…¥ SAM æ•°é‡ï¼‰
    default void printInfo() { System.out.println("Math Op"); }

    // âœ… å…è®¸æœ‰ static æ–¹æ³•ï¼ˆä¸è®¡å…¥ SAM æ•°é‡ï¼‰
    static boolean isValid(int a) { return a > 0; }
}

// âŒ ç¼–è¯‘æŠ¥é”™ï¼šFound 2 abstract methods
// @FunctionalInterface
// interface Invalid {
//     void methodA();
//     void methodB();
// }

```

---

### ğŸš€ 3.2 è¯­æ³•è¿›åŒ–ï¼šä»åŒ¿åç±»åˆ° Lambda *ğŸ”¥ å®æˆ˜å¿…å¤‡*

**ç›®æ ‡**ï¼š**é‡æ„**å†—ä½™çš„åŒ¿åå†…éƒ¨ç±»ä»£ç ï¼Œ**ä½“éªŒ** Lambda å¸¦æ¥çš„æè‡´ç®€æ´ã€‚

åœºæ™¯ï¼šæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè®¡ç®—å™¨ï¼Œæ‰§è¡ŒåŠ æ³•ã€‚

**ä»£ç å¯¹æ¯”**ï¼š

```java
public class LambdaEvolution {
    public static void main(String[] args) {
        // 1ï¸âƒ£ è¿œå¤å†™æ³•ï¼šåŒ¿åå†…éƒ¨ç±» (Anonymous Inner Class)
        // ç—›ç‚¹ï¼šä¸ºäº†å†™ä¸€è¡Œ x+yï¼Œæˆ‘ä»¬è¢«è¿«å†™äº† 5 è¡Œæ ·æ¿ä»£ç 
        MathOperation oldWay = new MathOperation() {
            @Override
            public int operate(int x, int y) {
                return x + y;
            }
        };

        // 2ï¸âƒ£ ç°ä»£å†™æ³•ï¼šLambda è¡¨è¾¾å¼
        // æ ¸å¿ƒæ€æƒ³ï¼šæ—¢ç„¶æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œç¼–è¯‘å™¨çŸ¥é“ä½ è¦å®ç°è°ã€‚
        // æ‰€ä»¥ï¼šå‚æ•° -> æ–¹æ³•ä½“
        MathOperation modernWay = (x, y) -> x + y;

        System.out.println(oldWay.operate(10, 20));    // 30
        System.out.println(modernWay.operate(10, 20)); // 30
    }
}

```

**ASCII ç»“æ„æ‹†è§£**ï¼š

```
     (x, y)      ->       x + y
       |         |          |
    [å‚æ•°åˆ—è¡¨] [ç®­å¤´ç¬¦å·] [å…·ä½“é€»è¾‘]
       |                    |
å¯¹åº” operate(int, int)    å¯¹åº” { return x + y; }

```

---

### ğŸ§° 3.3 æ ‡å‡†åº“å·¥å…·ç®±ï¼šjava.util.function *ğŸ’¡ æ ¸å¿ƒå¿…å­¦*

**ç›®æ ‡**ï¼š**è¿ç”¨** JDK å†…ç½®çš„ 4 å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£ï¼Œ**é¿å…**é‡å¤é€ è½®å­ã€‚

Google å·¥ç¨‹å¸ˆæœ‰ä¸€å¥åè¨€ï¼š*"ä¸è¦ä¸ºäº†æ¯ä¸€ä¸ªç®€å•çš„åŠ¨ä½œéƒ½å»å®šä¹‰ä¸€ä¸ªæ–°æ¥å£"*ã€‚JDK å·²ç»åœ¨ `java.util.function` åŒ…é‡Œä¸ºä½ å‡†å¤‡å¥½äº†ä¸€å¥—é€šç”¨çš„æ¥å£ã€‚

| æ¥å£å | æ–¹æ³•ç­¾å | ä½œç”¨æè¿° | ç°å®æ¯”å–» |
| --- | --- | --- | --- |
| **Consumer<T>** | `void accept(T t)` | **æ¶ˆè´¹å‹**ï¼šç»™ä½ ä¸€ä¸ªä¸œè¥¿ï¼Œä½ æŠŠå®ƒç”¨äº†ï¼Œä¸è¿”å›å€¼ã€‚ | **åƒè´§**ï¼šç»™ä¸ªè‹¹æœ -> åƒæ‰ã€‚ |
| **Supplier<T>** | `T get()` | **ä¾›ç»™å‹**ï¼šä¸ç»™å‚æ•°ï¼Œä½ å¾—äº§å‡ºä¸€ä¸ªä¸œè¥¿ã€‚ | **ATMæœº**ï¼šæ²¡ç»™é’± -> åé’ç¥¨ã€‚ |
| **Function<T, R>** | `R apply(T t)` | **å‡½æ•°å‹**ï¼šè¾“å…¥ Tï¼ŒåŠ å·¥åè¿”å› Rã€‚ | **æ¦¨æ±æœº**ï¼šæ”¾å…¥æ°´æœ -> äº§å‡ºæœæ±ã€‚ |
| **Predicate<T>** | `boolean test(T t)` | **æ–­è¨€å‹**ï¼šè¾“å…¥ Tï¼Œåˆ¤æ–­çœŸå‡ã€‚ | **å®‰æ£€å‘˜**ï¼šæ‰«æè¡Œæ -> é€šè¿‡/æ‹¦æˆªã€‚ |

**å®æˆ˜ä»£ç **ï¼š

```java
import java.util.function.*;

public class FunctionKit {
    public static void main(String[] args) {
        
        // 1. Consumer: æ‰“å°æ¶ˆæ¯
        Consumer<String> printer = s -> System.out.println("æ¶ˆè´¹æ¶ˆæ¯: " + s);
        printer.accept("Hello Java");

        // 2. Function: String è½¬ Integer
        Function<String, Integer> stringToInt = s -> Integer.parseInt(s);
        int num = stringToInt.apply("100"); // ç»“æœ 100

        // 3. Predicate: åˆ¤æ–­æ˜¯å¦åŠæ ¼
        Predicate<Integer> isPass = score -> score >= 60;
        System.out.println("åŠæ ¼äº†å—? " + isPass.test(59)); // false
    }
}

```

---

### ğŸ“ 3.4 ç»ˆææŒ‘æˆ˜ï¼šç­–ç•¥æ¨¡å¼é‡æ„

**ç›®æ ‡**ï¼š**æ•´åˆ**æ¥å£ã€åŒ¿åç±»ä¸ Lambda çŸ¥è¯†ï¼Œå®Œæˆä¸€æ¬¡ç°ä»£åŒ–çš„ä»£ç é‡æ„ã€‚

**åœºæ™¯**ï¼šä½ éœ€è¦ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œä»ä¸€å †è‹¹æœä¸­ç­›é€‰å‡ºç¬¦åˆè¦æ±‚çš„è‹¹æœï¼ˆæ¯”å¦‚ï¼šçº¢è‰²çš„ã€æˆ–è€…é‡é‡å¤§äº150gçš„ï¼‰ã€‚

**åŸå§‹ç¬¨é‡ä»£ç  (Legacy Code)**ï¼š

```java
// âŒ è¿™æ ·åšçš„é—®é¢˜ï¼šæ¯æ¬¡è¦æœ‰æ–°éœ€æ±‚ï¼Œéƒ½å¾—æ”¹ filterApples æ–¹æ³•ï¼Œæˆ–è€…å†™ä¸€å † if-else
public static List<Apple> filterApples(List<Apple> inventory, String color, int weight, boolean checkColor) {
    List<Apple> result = new ArrayList<>();
    for (Apple apple : inventory) {
        if (checkColor && apple.getColor().equals(color)) {
            result.add(apple);
        } else if (!checkColor && apple.getWeight() > weight) {
            result.add(apple);
        }
    }
    return result;
}

```

**âœ… ä½ çš„æŒ‘æˆ˜**ï¼š
è¯·ä½¿ç”¨ `Predicate<Apple>` æ¥å£ï¼Œå°†ä¸Šé¢çš„ä»£ç é‡æ„ä¸º**ç­–ç•¥æ¨¡å¼**ï¼Œå¹¶ç”¨ **Lambda** è°ƒç”¨å®ƒã€‚

**è¦æ±‚**ï¼š

1. å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ `filter` æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ª `Predicate` å‚æ•°ã€‚
2. åœ¨ `main` æ–¹æ³•ä¸­ï¼Œç”¨ä¸€è¡Œ Lambda ç­›é€‰å‡º"ç»¿è‰²è‹¹æœ"ã€‚
3. ç”¨ä¸€è¡Œ Lambda ç­›é€‰å‡º"é‡è‹¹æœ(>150)"ã€‚

**è¯·æ€è€ƒä½ çš„æ–¹æ¡ˆï¼Œç„¶åå‘ä¸‹çœ‹ç­”æ¡ˆã€‚**

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’¡ æŒ‘æˆ˜è§£æä¸æœ€ä¼˜è§£
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

```java
import java.util.ArrayList;
import java.util.List;
import java.util.function.Predicate;

class Apple {
    String color;
    int weight;
    public Apple(String c, int w) { color = c; weight = w; }
    // çœç•¥ toString()
}

public class AppleFilter {

    // âœ… 1. é€šç”¨è¿‡æ»¤æ–¹æ³• (ç­–ç•¥æ¨¡å¼)
    // è¿™é‡Œçš„ Predicate<Apple> å°±æ˜¯ä¸€ç§"è¡Œä¸ºå‚æ•°åŒ–"
    // æˆ‘ä»¬æŠŠ"åˆ¤æ–­é€»è¾‘"çš„å†³å®šæƒäº¤ç»™äº†è°ƒç”¨è€…
    public static List<Apple> filter(List<Apple> inventory, Predicate<Apple> p) {
        List<Apple> result = new ArrayList<>();
        for (Apple apple : inventory) {
            // p.test(apple) æ˜¯æ ¸å¿ƒï¼šå…·ä½“çš„åˆ¤æ–­é€»è¾‘åœ¨è¿è¡Œæ—¶æ‰å†³å®š
            if (p.test(apple)) {
                result.add(apple);
            }
        }
        return result;
    }

    public static void main(String[] args) {
        List<Apple> inventory = List.of(new Apple("green", 160), new Apple("red", 120));

        // âœ… 2. ç­›é€‰ç»¿è‹¹æœ
        // è¡Œä¸ºç›´æ¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä¸ä»…ä»£ç çŸ­ï¼Œè€Œä¸”è¯»èµ·æ¥åƒè‹±è¯­å¥å­
        List<Apple> greenApples = filter(inventory, apple -> "green".equals(apple.color));

        // âœ… 3. ç­›é€‰é‡è‹¹æœ
        List<Apple> heavyApples = filter(inventory, apple -> apple.weight > 150);
        
        // ç”šè‡³å¯ä»¥ç»„åˆé€»è¾‘ (Predicate çš„é»˜è®¤æ–¹æ³• and/or)
        Predicate<Apple> redAndHeavy = ((Predicate<Apple>) a -> "red".equals(a.color))
                                       .and(a -> a.weight > 150);
    }
}

```

---

### ğŸ“ æ€»ç»“ï¼šæ¥å£çš„æœ¬è´¨

ä» **Java 1.0 çš„è§„èŒƒå¥‘çº¦**ï¼Œåˆ° **Java 8 çš„å‡½æ•°å¼è¿›åŒ–**ï¼Œæ¥å£å§‹ç»ˆæ˜¯ Java è®¾è®¡çš„çµé­‚ã€‚

* **è§£è€¦**ï¼šç”¨æ¥å£æŠŠ"ç”¨ä»€ä¹ˆ"å’Œ"æ€ä¹ˆåš"åˆ†å¼€ï¼ˆä¾èµ–å€’ç½®ï¼‰ã€‚
* **è¿›åŒ–**ï¼šç”¨ `default` æ–¹æ³•ä¿®è¡¥æ—§æ¥å£ï¼Œå…¼å®¹æœªæ¥ã€‚
* **ç®€æ´**ï¼šç”¨ `@FunctionalInterface` å’Œ Lambda è®©ä»£ç èµ·é£ã€‚
