ç°åœ¨å·²ç»æŒæ¡äº†æ„é€ å™¨çš„**é‡è½½**å’Œ**è°ƒç”¨é“¾**ã€‚ä½†åœ¨å¤§å‚é¢è¯•ä¸­ï¼Œé¢è¯•å®˜é€šå¸¸ä¼šæŠŠæ„é€ å™¨å’Œ **â€œä»£ç å—â€ (Block)** æ··åœ¨ä¸€èµ·è€ƒï¼Œè¿™æ˜¯ **Java å¯¹è±¡åˆå§‹åŒ–é¡ºåº** çš„ç»ˆæéš¾ç‚¹ã€‚

**åœºæ™¯**ï¼š

```java
class User {
    // 1. é™æ€ä»£ç å—
    static { System.out.println("æˆ‘æ˜¯é™æ€å—"); }
    
    // 2. æ„é€ ä»£ç å—
    { System.out.println("æˆ‘æ˜¯æ„é€ å—"); }

    // 3. æ„é€ å™¨
    public User() { System.out.println("æˆ‘æ˜¯æ„é€ å™¨"); }
}

```

é—®ï¼š`new User()` æ—¶ï¼Œè¿™ä¸‰ä¸ªè°å…ˆæ‰“å°ï¼Ÿå¦‚æœæœ‰çˆ¶ç±»å‘¢ï¼Ÿ

---

è¿™æ˜¯ Java é¢è¯•ä¸­çš„â€œ**ç»ˆæè¯•é‡‘çŸ³**â€ã€‚æŒæ¡äº†è¿™ä¸ªé¡ºåºï¼Œä½ å¯¹ Java ç±»çš„åŠ è½½å’Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸå°±æœ‰äº†ä¸Šå¸è§†è§’ã€‚

å¾ˆå¤šåˆå­¦è€…æ­»è®°ç¡¬èƒŒï¼Œç»“æœä¸€ä¸Šè€ƒåœºå°±ä¹±ã€‚æˆ‘ä»¬ç”¨**ç¬¬ä¸€æ€§åŸç†**æ¥æ‹†è§£ï¼š

> **æ ¸å¿ƒå¿ƒæ³•**ï¼š**å…ˆæœ‰å·¥å‚ï¼ˆç±»åŠ è½½ï¼‰ï¼Œæ‰æœ‰äº§å“ï¼ˆå¯¹è±¡åˆ›å»ºï¼‰ã€‚å…ˆæœ‰çˆ¶äº²ï¼Œæ‰æœ‰å„¿å­ã€‚**

æˆ‘ä»¬å°†è¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªå¹³è¡Œå®‡å®™ï¼š**ç±»å±‚é¢ï¼ˆStaticï¼‰** å’Œ **å¯¹è±¡å±‚é¢ï¼ˆInstanceï¼‰**ã€‚

---

### ğŸ“Š 1. æ ¸å¿ƒæœºåˆ¶ï¼šäº”æ­¥åˆå§‹åŒ–å®šå¾‹

æ— è®ºä»£ç å¤šå¤æ‚ï¼Œæ°¸è¿œéµå¾ªè¿™ **5 ä¸ªæ­¥éª¤** çš„ç»å¯¹é¡ºåºï¼š

1. **çˆ¶ç±»é™æ€ (Father Static)**ï¼šç±»åŠ è½½å™¨å…ˆåŠ è½½çˆ¶ç±»å›¾çº¸ã€‚
2. **å­ç±»é™æ€ (Son Static)**ï¼šæ¥ç€åŠ è½½å­ç±»å›¾çº¸ã€‚ï¼ˆ**æ³¨æ„ï¼šé™æ€åªæ‰§è¡Œä¸€æ¬¡ï¼**ï¼‰
3. **çˆ¶ç±»æ„é€ å‡†å¤‡ (Father Instance)**ï¼š
   * æ‰§è¡Œçˆ¶ç±»æ„é€ ä»£ç å— `{...}`
   * æ‰§è¡Œçˆ¶ç±»æ„é€ å™¨ `Constructor`
4. **å­ç±»æ„é€ å‡†å¤‡ (Son Instance)**ï¼š
   * æ‰§è¡Œå­ç±»æ„é€ ä»£ç å— `{...}`
   * æ‰§è¡Œå­ç±»æ„é€ å™¨ `Constructor`



> **è®°å¿†å£è¯€**ï¼š**çˆ¶é™ -> å­é™ -> çˆ¶æ„é€ (å—+å™¨) -> å­æ„é€ (å—+å™¨)**

---

### ğŸ”¬ 2. æ·±åº¦å›¾è§£ï¼šæ—¶é—´è½´ (ASCII Timeline)

å‡è®¾æˆ‘ä»¬æ‰§è¡Œ `new Son();`ï¼ŒJVM å†…éƒ¨çš„æ—¶é—´çº¿æ˜¯è¿™æ ·çš„ï¼š

```text
â³ æ—¶é—´è½´å¼€å§‹
      |
      | --- [ é˜¶æ®µä¸€ï¼šç±»åŠ è½½ (Class Loading) ] ---
      | ğŸ’¡ ä»…åœ¨ç¬¬ä¸€æ¬¡ç”¨åˆ°è¯¥ç±»æ—¶è§¦å‘ï¼Œå…¨ç”Ÿå‘½å‘¨æœŸåªè·‘ä¸€æ¬¡ï¼
      |
1ï¸âƒ£   +-- [ çˆ¶ç±» Static å— ] 
      |      System.out.println("Father Static");
      |
2ï¸âƒ£   +-- [ å­ç±» Static å— ] 
      |      System.out.println("Son Static");
      |
      |
      | --- [ é˜¶æ®µäºŒï¼šå¯¹è±¡åˆ›å»º (Instantiation) ] ---
      | ğŸ’¡ æ¯æ¬¡ new Son() éƒ½ä¼šå®Œæ•´è·‘ä¸€éä¸‹é¢æ‰€æœ‰æ­¥éª¤
      |
3ï¸âƒ£   +-- [ çˆ¶ç±» å®ä¾‹æ„å»º ] (å› ä¸ºå­ç±»æ„é€ å™¨ç¬¬ä¸€è¡Œéšå« super())
      |      a. æ‰§è¡Œ Father æ™®é€šæ„é€ å— { ... }
      |      b. æ‰§è¡Œ Father æ„é€ å™¨    Father() { ... }
      |
4ï¸âƒ£   +-- [ å­ç±» å®ä¾‹æ„å»º ]
      |      a. æ‰§è¡Œ Son æ™®é€šæ„é€ å—    { ... }
      |      b. æ‰§è¡Œ Son æ„é€ å™¨       Son() { ... }
      |
â³ æ—¶é—´è½´ç»“æŸ

```

---

### ğŸ’» 3. å®æˆ˜ä»£ç ï¼šæ­»äº¡æµ‹è¯• (Death Test)

ä»£ç è™½ç„¶çŸ­ï¼Œä½†æ€ä¼¤åŠ›æå¤§ã€‚è¯·ä»”ç»†çœ‹ï¼š

```java
class Father {
    // é™æ€å—
    static { System.out.println("(1) çˆ¶ç±»é™æ€å—"); }
    // æ„é€ ä»£ç å—
    { System.out.println("(3) çˆ¶ç±»æ„é€ ä»£ç å—"); }
    // æ„é€ å™¨
    Father() { System.out.println("(4) çˆ¶ç±»æ„é€ å™¨"); }
}

class Son extends Father {
    // é™æ€å—
    static { System.out.println("(2) å­ç±»é™æ€å—"); }
    // æ„é€ ä»£ç å—
    { System.out.println("(5) å­ç±»æ„é€ ä»£ç å—"); }
    // æ„é€ å™¨
    Son() { System.out.println("(6) å­ç±»æ„é€ å™¨"); }
}

public class Test {
    public static void main(String[] args) {
        System.out.println("--- ç¬¬ä¸€æ¬¡ new ---");
        new Son(); 
        System.out.println("--- ç¬¬äºŒæ¬¡ new ---");
        new Son();
    }
}

```

#### âœ… æ­£ç¡®è¾“å‡ºï¼ˆä¸€å®šè¦çœ‹æ‡‚â€œç¬¬äºŒæ¬¡ newâ€çš„åŒºåˆ«ï¼‰ï¼š

```text
--- ç¬¬ä¸€æ¬¡ new ---
(1) çˆ¶ç±»é™æ€å—      <-- ç±»åŠ è½½ï¼ˆåªä¸€æ¬¡ï¼‰
(2) å­ç±»é™æ€å—      <-- ç±»åŠ è½½ï¼ˆåªä¸€æ¬¡ï¼‰
(3) çˆ¶ç±»æ„é€ ä»£ç å—
(4) çˆ¶ç±»æ„é€ å™¨
(5) å­ç±»æ„é€ ä»£ç å—
(6) å­ç±»æ„é€ å™¨

--- ç¬¬äºŒæ¬¡ new ---
(3) çˆ¶ç±»æ„é€ ä»£ç å—  <-- âš ï¸ æ³¨æ„ï¼é™æ€å—ä¸å†æ‰§è¡Œï¼
(4) çˆ¶ç±»æ„é€ å™¨
(5) å­ç±»æ„é€ ä»£ç å—
(6) å­ç±»æ„é€ å™¨

```

**ç‰¹åˆ«è¯´æ˜ï¼š** æ„é€ ä»£ç å—å’Œæ˜¾å¼èµ‹å€¼å¤„äºåŒä¸€ä¼˜å…ˆçº§ï¼Œå®ƒä»¬éƒ½ä¼šè¢«ç¼–è¯‘å™¨â€œæ¬ç§»â€åˆ°æ„é€ å™¨ä¸»ä½“ä»£ç çš„å‰é¢æ‰§è¡Œã€‚å®ƒä»¬ä¹‹é—´çš„æ‰§è¡Œé¡ºåºï¼Œ**å®Œå…¨å–å†³äºä½ åœ¨ä»£ç ä¸­ä¹¦å†™çš„å…ˆåé¡ºåºã€‚**

---

### ğŸ’¼ 4. å¤§å‚è§†è§’ï¼šè¿™ä¸œè¥¿æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

ä½ å¯èƒ½ä¼šé—®ï¼šâ€œGemï¼Œè¿™éƒ½æ˜¯é¢è¯•é€ ç«ç®­å§ï¼Ÿå®é™…å†™ä»£ç è°è¿™ä¹ˆå†™ï¼Ÿâ€
ç¡®å®ï¼Œ**æ™®é€šä¸šåŠ¡ä»£ç ä¸¥ç¦åœ¨æ„é€ ä»£ç å—é‡Œå†™é€»è¾‘**ï¼Œå› ä¸ºå¯è¯»æ€§æå·®ã€‚ä½†åœ¨å¤§å‚çš„åŸºç¡€è®¾æ–½å¼€å‘ä¸­ï¼Œè¿™äº›æœºåˆ¶éå¸¸é‡è¦ï¼š

1. **Static å—**ï¼š
* **åœºæ™¯**ï¼šJDBC é©±åŠ¨åŠ è½½ã€è¯»å–å…¨å±€é…ç½®æ–‡ä»¶ã€åˆå§‹åŒ–å¤æ‚çš„é™æ€ Mapã€‚
* **å¤§å‚è§„èŒƒ**ï¼šç¡®ä¿é™æ€å—é‡Œçš„é€»è¾‘æ‰§è¡Œæå¿«ï¼Œå¦‚æœå¡ä½ï¼Œæ•´ä¸ªç±»éƒ½åŠ è½½ä¸äº†ï¼Œç¨‹åºä¼šå¡æ­»åœ¨å¯åŠ¨é˜¶æ®µã€‚


2. **æ„é€ ä»£ç å— `{...}`**ï¼š
* **åœºæ™¯**ï¼š**åŒ¿åå†…éƒ¨ç±»**åˆå§‹åŒ–ã€‚
* **åŸç†**ï¼šåŒ¿åå†…éƒ¨ç±»æ²¡æœ‰åå­—ï¼Œæ‰€ä»¥å†™ä¸å‡ºæ„é€ å™¨ï¼è¿™æ—¶å€™æƒ³åˆå§‹åŒ–æ•°æ®ï¼Œåªèƒ½å†™åœ¨ `{...}` é‡Œã€‚
* **ç¤ºä¾‹**ï¼š
```java
// åŒæ‹¬å¼§åˆå§‹åŒ– (Double Brace Initialization) - ä¸æ¨èä½†å¸¸è§
List<String> list = new ArrayList<>() {{
    add("A");  // è¿™å…¶å®æ˜¯åœ¨æ„é€ ä»£ç å—é‡Œæ‰§è¡Œçš„
    add("B");
}};

```





---

### ğŸ“ 5. è¯¾åæŒ‘æˆ˜

å¦‚æœæˆ‘åœ¨ `Son` çš„æ„é€ å™¨é‡Œå†™äº† `this("xxx")` è¿›è¡Œé‡è½½è°ƒç”¨ï¼Œé‚£ä¹ˆï¼š
`Son` çš„**æ„é€ ä»£ç å—**ä¼šæ‰§è¡Œå‡ æ¬¡ï¼Ÿ

* A. æ‰§è¡Œä¸¤æ¬¡ï¼ˆæ¯æ¬¡è°ƒç”¨æ„é€ å™¨éƒ½æ‰§è¡Œï¼‰ã€‚
* B. åªæ‰§è¡Œä¸€æ¬¡ï¼ˆåœ¨æœ€ç»ˆå¹²æ´»çš„é‚£ä¸ªæ„é€ å™¨æ‰§è¡Œå‰ï¼‰ã€‚
* C. æŠ¥é”™ã€‚
