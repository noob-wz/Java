# â˜• Java å†…æ ¸è§£å¯†ï¼šSuper å…³é”®å­—çš„åŒé‡è¿è¡Œæœºåˆ¶

> **æ¶æ„å¸ˆçº§æ·±åº¦è§£æ** | ä»å­—èŠ‚ç åˆ° CPU æŒ‡ä»¤çš„å®Œæ•´é“¾è·¯  
> **éš¾åº¦ç­‰çº§**: â­â­â­â­â­ | **é¢„è®¡é˜…è¯»**: 45 åˆ†é’Ÿ

---

## ğŸ“– æ–‡æ¡£å¯¼èˆªç³»ç»Ÿ

### ğŸ¯ å¿«é€Ÿå®šä½ï¼ˆæŒ‰éœ€é˜…è¯»ï¼‰

```
â”œâ”€ ğŸŸ¢ å…¥é—¨å±‚ [10åˆ†é’Ÿ]
â”‚  â””â”€ æ ¸å¿ƒè®¤çŸ¥ + ä¸‰å¥è¯æ€»ç»“ + åŸºç¡€å¯¹æ¯”
â”‚
â”œâ”€ ğŸŸ¡ è¿›é˜¶å±‚ [20åˆ†é’Ÿ]  
â”‚  â””â”€ å­—èŠ‚ç åˆ†æ + å†…å­˜å¸ƒå±€ + æ‰§è¡Œæµç¨‹
â”‚
â”œâ”€ ğŸ”´ ä¸“å®¶å±‚ [30åˆ†é’Ÿ]
â”‚  â””â”€ æ€§èƒ½å‰–æ + é™·é˜±è§„é¿ + JVMæºç 
â”‚
â””â”€ ğŸ’ å¤§å¸ˆå±‚ [45åˆ†é’Ÿ]
   â””â”€ å®Œæ•´é˜…è¯» + å®æˆ˜æ¡ˆä¾‹ + é¢è¯•é¢˜åº“
```

**å»ºè®®è·¯å¾„**:
- **é¢è¯•å‡†å¤‡**: ğŸŸ¢ + ğŸŸ¡ + é¢è¯•é¢˜åº“
- **æ€§èƒ½ä¼˜åŒ–**: ğŸŸ¡ + ğŸ”´ + æ€§èƒ½å¯¹æ¯”
- **æ¶æ„è®¾è®¡**: å®Œæ•´é˜…è¯»æ‰€æœ‰ç« èŠ‚

---

## ğŸ¯ æ ¸å¿ƒè®¤çŸ¥é‡æ„ `[ğŸŸ¢ å…¥é—¨å¿…è¯»]`

### Super çš„ä¸‰é‡å¦å®š

```
âŒ ä¸æ˜¯å¯¹è±¡å¼•ç”¨  â†’ å †ä¸­æ²¡æœ‰ç‹¬ç«‹çš„"çˆ¶ç±»å¯¹è±¡"
âŒ ä¸æ˜¯æŒ‡é’ˆ      â†’ ä¸æŒ‡å‘å¦ä¸€å—å†…å­˜åŒºåŸŸ  
âŒ ä¸æ˜¯è¿è¡Œæ—¶å˜é‡ â†’ æ— æ³•è¢«èµ‹å€¼ã€ä¼ é€’æˆ–è¿”å›
```

### Super çš„æœ¬è´¨

```java
// é”™è¯¯ç†è§£
Father f = super;  // âŒ ç¼–è¯‘é”™è¯¯: super ä¸æ˜¯å˜é‡

// æ­£ç¡®ç†è§£
super.method();    // âœ… ç¼–è¯‘å™¨æŒ‡ä»¤,æ”¹å˜æ–¹æ³•è§£æç­–ç•¥
```

**ç»ˆæå®šä¹‰**:
> `super` æ˜¯ä¸€ä¸ª **ä¸Šä¸‹æ–‡åˆ‡æ¢å…³é”®å­— (Context Switch Keyword)**  
> å®ƒåœ¨ç¼–è¯‘æœŸæ”¹å˜ç¬¦å·è§£æè§„åˆ™,åœ¨è¿è¡ŒæœŸæ”¹å˜æ‰§è¡Œè·¯å¾„é€‰æ‹©

---

## ğŸ§¬ ç†è®ºåŸºçŸ³ï¼šä¸€ä¸ªå¯¹è±¡çš„åˆ†å±‚ç°å®

### å†…å­˜ç‰©ç†ç»“æ„ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰

```
å †å†…å­˜ä¸­çš„å®é™…å¸ƒå±€ (64ä½JVM)

å†…å­˜åœ°å€        å­—èŠ‚èŒƒå›´    å†…å®¹                  è®¿é—®è·¯å¾„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0x7f8a1c000    [0-7]      Mark Word             å¯¹è±¡å¤´(é”/GC)
0x7f8a1c008    [8-15]     Klass Pointer â”€â”€â”€â”€â”   ç±»å‹æŒ‡é’ˆ
                                            â”‚
0x7f8a1c010    [16-19]    int id = 100      â”‚   â† super.id
0x7f8a1c014    [20-35]    String name="F"   â”‚   â† super.name
                                            â”‚
0x7f8a1c024    [36-39]    int id = 200      â”‚   â† this.id  
0x7f8a1c028    [40-55]    String name="S"   â”‚   â† this.name
0x7f8a1c038    [56-63]    padding           â”‚
                                            â”‚
                                            â†“
                        Klass å…ƒæ•°æ®åŒº (æ–¹æ³•åŒº)
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Father.class    â”‚
                        â”‚  - vtable        â”‚
                        â”‚  - field offsets â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚  Son.class       â”‚
                        â”‚  - vtable (è¦†ç›–) â”‚
                        â”‚  - field offsets â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¬ å†…å­˜å¸ƒå±€çš„äº”ä¸ªäº‹å®**:

1. **å•ä¸€å®ä½“**: å †ä¸­åªæœ‰ä¸€ä¸ªå¯¹è±¡å®ä¾‹
2. **å­—æ®µå…±å­˜**: çˆ¶ç±»å­—æ®µå’Œå­ç±»å­—æ®µç‰©ç†ä¸Šéƒ½ä¿ç•™
3. **åç§»é‡éš”ç¦»**: åŒåå­—æ®µæœ‰ä¸åŒçš„å†…å­˜åç§»é‡
4. **å…ƒæ•°æ®åˆ†ç¦»**: vtable åœ¨æ–¹æ³•åŒº,ä¸åœ¨å †ä¸Š
5. **å¼•ç”¨å”¯ä¸€**: `this` å’Œ `super` æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡åœ°å€

---

## ğŸ“ ç¬¬ä¸€ç»´åº¦ï¼šå±æ€§è®¿é—® â€” é™æ€çš„ç©ºé—´å¯»å€ `[ğŸŸ¢ å…¥é—¨]`

### ä¸€å¥è¯æœ¬è´¨

> **å±æ€§è®¿é—® = ç¼–è¯‘æœŸè®¡ç®—çš„å†…å­˜åç§»é‡**  
> æ²¡æœ‰åŠ¨æ€æŸ¥æ‰¾,æ²¡æœ‰å¤šæ€,åªæœ‰ç‰©ç†åæ ‡çš„åˆ‡æ¢

### ğŸ”¬ å¾®è§‚æ‰§è¡Œæµ `[ğŸŸ¡ è¿›é˜¶]`

#### æµ‹è¯•ä»£ç 

```java
class Father {
    int id = 100;
    String name = "Father";
}

class Son extends Father {
    int id = 200;
    String name = "Son";
    
    void compareFields() {
        System.out.println(this.id);    // 200
        System.out.println(super.id);   // 100
        System.out.println(this.name);  // "Son"
        System.out.println(super.name); // "Father"
    }
}
```

#### ğŸ”µ `this.id` å®Œæ•´é“¾è·¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¯‘æœŸ (javac)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. è¯­æ³•æ ‘è§£æ: è¯†åˆ« this.id                              â”‚
â”‚ 2. ç¬¦å·è§£æ:   åœ¨ Son ç±»ä¸­æŸ¥æ‰¾ id å­—æ®µ                   â”‚
â”‚ 3. åç§»é‡è®¡ç®—: Son.id offset = 36                       â”‚
â”‚ 4. å­—èŠ‚ç ç”Ÿæˆ:                                           â”‚
â”‚    0: aload_0             // åŠ è½½ this                   â”‚
â”‚    1: getfield #2         // Field Son.id:I             â”‚
â”‚                                                          â”‚
â”‚ å¸¸é‡æ±  #2 = Fieldref [Son.id]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿è¡ŒæœŸ (JVM)                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æŒ‡ä»¤æ‰§è¡Œ:   aload_0 â†’ å°†å¯¹è±¡å¼•ç”¨å‹æ ˆ                  â”‚
â”‚ 2. ç¬¦å·è§£æ:   getfield #2 â†’ è§£æä¸º Son.id              â”‚
â”‚ 3. åç§»é‡è·å–: ä» Son.class å…ƒæ•°æ®è¯»å– offset = 36      â”‚
â”‚ 4. å†…å­˜è¯»å–:   å¯¹è±¡åœ°å€ + 36 = 0x7f8a1c024              â”‚
â”‚ 5. æ•°æ®åŠ è½½:   è¯»å– 4 å­—èŠ‚ int å€¼ = 200                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸŸ¢ `super.id` å®Œæ•´é“¾è·¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¯‘æœŸ (javac)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. å…³é”®å­—è¯†åˆ«: æ£€æµ‹åˆ° super å…³é”®å­—                       â”‚
â”‚ 2. å¼ºåˆ¶åˆ‡æ¢:   è·³è¿‡ Son ç±»,ç›´æ¥æŸ¥æ‰¾ Father ç±»           â”‚
â”‚ 3. ç¬¦å·è§£æ:   åœ¨ Father ç±»ä¸­æŸ¥æ‰¾ id å­—æ®µ               â”‚
â”‚ 4. åç§»é‡è®¡ç®—: Father.id offset = 16                    â”‚
â”‚ 5. å­—èŠ‚ç ç”Ÿæˆ:                                           â”‚
â”‚    0: aload_0             // åŠ è½½ this (åŒä¸€ä¸ªå¯¹è±¡!)    â”‚
â”‚    1: getfield #3         // Field Father.id:I          â”‚
â”‚                                                          â”‚
â”‚ å¸¸é‡æ±  #3 = Fieldref [Father.id]  â† ğŸ”‘ å…³é”®å·®å¼‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿è¡ŒæœŸ (JVM)                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æŒ‡ä»¤æ‰§è¡Œ:   aload_0 â†’ å°†å¯¹è±¡å¼•ç”¨å‹æ ˆ (åŒä¸€ä¸ªå¯¹è±¡)    â”‚
â”‚ 2. ç¬¦å·è§£æ:   getfield #3 â†’ è§£æä¸º Father.id           â”‚
â”‚ 3. åç§»é‡è·å–: ä» Father.class å…ƒæ•°æ®è¯»å– offset = 16   â”‚
â”‚ 4. å†…å­˜è¯»å–:   å¯¹è±¡åœ°å€ + 16 = 0x7f8a1c010              â”‚
â”‚ 5. æ•°æ®åŠ è½½:   è¯»å– 4 å­—èŠ‚ int å€¼ = 100                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¨ å¯è§†åŒ–å¯¹æ¯”

```
å†…å­˜æ¡æ¨ªæˆªé¢                      å­—èŠ‚ç æŒ‡ä»¤                ç¬¦å·å¼•ç”¨

Base+16 â†’ [100] Father.id â†â”€â”€ getfield #3 â†â”€â”€â”€â”€â”€â”€ Fieldref(Father.id)
Base+36 â†’ [200] Son.id    â†â”€â”€ getfield #2 â†â”€â”€â”€â”€â”€â”€ Fieldref(Son.id)
           â†‘
        åŒä¸€ä¸ªå¯¹è±¡
        0x7f8a1c000
```

### ğŸ“Š ç©ºé—´ç»´åº¦ç‰¹å¾è¡¨ `[ğŸŸ¢ å…¥é—¨]`

| ç»´åº¦ | this.field | super.field |
|------|------------|-------------|
| **å†³ç­–é˜¶æ®µ** | ç¼–è¯‘æœŸ | ç¼–è¯‘æœŸ |
| **å­—èŠ‚ç æŒ‡ä»¤** | `getfield` | `getfield` (æŒ‡ä»¤ç›¸åŒ) |
| **ç¬¦å·å¼•ç”¨** | å­ç±»å­—æ®µ | çˆ¶ç±»å­—æ®µ (å…³é”®å·®å¼‚) |
| **å†…å­˜åç§»é‡** | å­ç±» offset | çˆ¶ç±» offset |
| **è¿è¡Œæ—¶è¡Œä¸º** | é™æ€è¯»å– | é™æ€è¯»å– |
| **æ˜¯å¦å¤šæ€** | âŒ | âŒ |
| **æ€§èƒ½å·®å¼‚** | æ— å·®å¼‚ | æ— å·®å¼‚ (éƒ½æ˜¯ç›´æ¥å¯»å€) |

---

## âš¡ ç¬¬äºŒç»´åº¦ï¼šæ–¹æ³•è°ƒç”¨ â€” åŠ¨æ€çš„é€»è¾‘è·¯ç”± `[ğŸŸ¡ è¿›é˜¶]`

### ä¸€å¥è¯æœ¬è´¨

> **æ–¹æ³•è°ƒç”¨ = åŠ¨æ€æŸ¥è¡¨ vs é™æ€ç›´è¿çš„æˆ˜åœº**  
> `this` éµå®ˆå¤šæ€è§„åˆ™,`super` ç»•è¿‡å¤šæ€æœºåˆ¶

### ğŸ—ï¸ è™šæ–¹æ³•è¡¨(vtable)æ·±åº¦è§£æ

#### vtable çš„å†…å­˜ç»“æ„

```
Klass å…ƒæ•°æ® (æ–¹æ³•åŒº)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Father.class                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ vtable (è™šæ–¹æ³•è¡¨)                            â”‚
â”‚  [0] finalize()    â†’ 0x00001000             â”‚
â”‚  [1] toString()    â†’ 0x00001100             â”‚
â”‚  [2] run()         â†’ 0x00001200  â† åŸå§‹åœ°å€ â”‚
â”‚  [3] jump()        â†’ 0x00001300             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Son.class (ç»§æ‰¿åçš„ vtable)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Son.class                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ vtable (è™šæ–¹æ³•è¡¨)                            â”‚
â”‚  [0] finalize()    â†’ 0x00001000  (ç»§æ‰¿)     â”‚
â”‚  [1] toString()    â†’ 0x00001100  (ç»§æ‰¿)     â”‚
â”‚  [2] run()         â†’ 0x00002200  â† è¢«è¦†ç›–!  â”‚
â”‚  [3] jump()        â†’ 0x00001300  (ç»§æ‰¿)     â”‚
â”‚  [4] fly()         â†’ 0x00002400  (æ–°å¢)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
                        é‡å†™åçš„æ–°åœ°å€
```

**ğŸ”‘ vtable çš„ä¸‰æ¡é“å¾‹**:

1. **æ§½ä½ç»§æ‰¿**: å­ç±» vtable ç»§æ‰¿çˆ¶ç±»çš„æ§½ä½å¸ƒå±€
2. **åœ°å€è¦†ç›–**: é‡å†™æ–¹æ³•ä¼šæ›¿æ¢å¯¹åº”æ§½ä½çš„åœ°å€
3. **æ–°å¢æ§½ä½**: å­ç±»æ–°æ–¹æ³•è¿½åŠ åœ¨æœ«å°¾

### ğŸ”¬ å¾®è§‚æ‰§è¡Œæµ `[ğŸŸ¡ è¿›é˜¶]`

#### æµ‹è¯•ä»£ç 

```java
class Father {
    void run() { 
        System.out.println("Father running"); 
    }
    
    void jump() {
        System.out.println("Father jumping");
    }
}

class Son extends Father {
    @Override
    void run() { 
        System.out.println("Son running"); 
    }
    
    void test() {
        this.run();    // åŠ¨æ€è°ƒç”¨
        super.run();   // é™æ€è°ƒç”¨
        this.jump();   // åŠ¨æ€è°ƒç”¨(æœªé‡å†™)
        super.jump();  // é™æ€è°ƒç”¨
    }
}
```

#### ğŸ”µ `this.run()` å®Œæ•´é“¾è·¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¯‘æœŸ (javac)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æ–¹æ³•æŸ¥æ‰¾:   åœ¨ Son ç±»ä¸­æ‰¾åˆ° run() æ–¹æ³•               â”‚
â”‚ 2. å¯é‡å†™æ£€æµ‹: æ£€æµ‹åˆ° @Override æ³¨è§£                     â”‚
â”‚ 3. æŒ‡ä»¤é€‰æ‹©:   é€‰æ‹©åŠ¨æ€è°ƒç”¨æŒ‡ä»¤                          â”‚
â”‚ 4. å­—èŠ‚ç ç”Ÿæˆ:                                           â”‚
â”‚    0: aload_0                                            â”‚
â”‚    1: invokevirtual #4  // Method run:()V               â”‚
â”‚                                                          â”‚
â”‚ å¸¸é‡æ±  #4 = Methodref [Son.run]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿è¡ŒæœŸ (JVM) - åŠ¨æ€å¤šæ€è·¯å¾„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æŒ‡ä»¤æ‰§è¡Œ:   invokevirtual                             â”‚
â”‚ 2. å¯¹è±¡è·å–:   ä»æ“ä½œæ•°æ ˆå¼¹å‡ºå¯¹è±¡å¼•ç”¨                    â”‚
â”‚ 3. ç±»å‹ç¡®å®š:   è¯»å–å¯¹è±¡å¤´ â†’ Klass Pointer               â”‚
â”‚                Klass* = Son.class                        â”‚
â”‚ 4. vtable å®šä½: è¿›å…¥ Son.class å…ƒæ•°æ®åŒº                 â”‚
â”‚ 5. æ§½ä½è®¡ç®—:   æ ¹æ®æ–¹æ³•ç­¾å run() å®šä½åˆ° vtable[2]      â”‚
â”‚ 6. åœ°å€è¯»å–:   vtable[2] = 0x00002200                   â”‚
â”‚ 7. CPU è·³è½¬:   jmp 0x00002200                           â”‚
â”‚ 8. æ‰§è¡Œä»£ç :   Son.run() æ–¹æ³•ä½“                         â”‚
â”‚                                                          â”‚
â”‚ â±ï¸ æ€§èƒ½å¼€é”€: ~5-10 CPU å‘¨æœŸ (æŸ¥è¡¨ + é—´æ¥è·³è½¬)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸŸ¢ `super.run()` å®Œæ•´é“¾è·¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¯‘æœŸ (javac)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. å…³é”®å­—è¯†åˆ«: æ£€æµ‹åˆ° super å…³é”®å­—                       â”‚
â”‚ 2. å¼ºåˆ¶åˆ‡æ¢:   å¿½ç•¥ Son.run(),ç›´æ¥å®šä½ Father.run()     â”‚
â”‚ 3. æŒ‡ä»¤é€‰æ‹©:   é€‰æ‹©ç‰¹æ®Šè°ƒç”¨æŒ‡ä»¤ âš ï¸                      â”‚
â”‚ 4. å­—èŠ‚ç ç”Ÿæˆ:                                           â”‚
â”‚    0: aload_0                                            â”‚
â”‚    1: invokespecial #5  // Method Father.run:()V        â”‚
â”‚                                                          â”‚
â”‚ å¸¸é‡æ±  #5 = Methodref [Father.run]  â† ğŸ”‘ ç›´æ¥æŒ‡å‘çˆ¶ç±»  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿è¡ŒæœŸ (JVM) - é™æ€ç»‘å®šè·¯å¾„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æŒ‡ä»¤æ‰§è¡Œ:   invokespecial (ç‰¹æ®ŠæŒ‡ä»¤)                 â”‚
â”‚ 2. vtable è·³è¿‡: ğŸš« ä¸æŸ¥è¯¢ vtable!                       â”‚
â”‚ 3. ç¬¦å·è§£æ:   ç›´æ¥è§£æ Methodref [Father.run]          â”‚
â”‚ 4. å…ƒæ•°æ®æŸ¥æ‰¾: åœ¨æ–¹æ³•åŒºæ‰¾åˆ° Father.class å…ƒæ•°æ®         â”‚
â”‚ 5. æ–¹æ³•å®šä½:   è¯»å– Father.run() çš„ç›´æ¥åœ°å€             â”‚
â”‚ 6. åœ°å€è·å–:   0x00001200 (çˆ¶ç±»åŸå§‹åœ°å€)                â”‚
â”‚ 7. CPU è·³è½¬:   jmp 0x00001200 (ç›´æ¥è·³è½¬)                â”‚
â”‚ 8. æ‰§è¡Œä»£ç :   Father.run() æ–¹æ³•ä½“                      â”‚
â”‚                                                          â”‚
â”‚ â±ï¸ æ€§èƒ½å¼€é”€: ~2-3 CPU å‘¨æœŸ (ç›´æ¥è·³è½¬,ç•¥å¿«)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ­ è°ƒç”¨è·¯å¾„å¯è§†åŒ–

```
æ–¹æ³•è°ƒç”¨çš„ä¸¤æ¡è·¯å¾„

this.run()                           super.run()
    â”‚                                     â”‚
    â†“                                     â†“
invokevirtual                        invokespecial
    â”‚                                     â”‚
    â”œâ”€â†’ è¯»å–å¯¹è±¡å¤´                        â”œâ”€â†’ è·³è¿‡å¯¹è±¡å¤´
    â”‚                                     â”‚
    â†“                                     â†“
è·å– Klass Pointer                   è§£æç¬¦å·å¼•ç”¨
    â”‚                                     â”‚
    â†“                                     â†“
è¿›å…¥ Son.class å…ƒæ•°æ®                 è¿›å…¥ Father.class å…ƒæ•°æ®
    â”‚                                     â”‚
    â†“                                     â†“
æŸ¥æ‰¾ vtable                           ç›´æ¥æŸ¥æ‰¾æ–¹æ³•è¡¨
    â”‚                                     â”‚
    â†“                                     â†“
vtable[2] = 0x2200                   Father.run = 0x1200
    â”‚                                     â”‚
    â†“                                     â†“
æ‰§è¡Œ Son.run()                        æ‰§è¡Œ Father.run()

ğŸ”´ åŠ¨æ€ + å¤šæ€                        ğŸŸ¢ é™æ€ + ç›´è¿
```

### ğŸ“Š æ—¶é—´ç»´åº¦ç‰¹å¾è¡¨ `[ğŸŸ¡ è¿›é˜¶]`

| ç»´åº¦ | this.method() | super.method() |
|------|---------------|----------------|
| **å­—èŠ‚ç æŒ‡ä»¤** | `invokevirtual` | `invokespecial` |
| **ç»‘å®šæ—¶æœº** | è¿è¡Œæ—¶ | ç¼–è¯‘æœŸ |
| **æŸ¥è¡¨è¡Œä¸º** | å¿…é¡»æŸ¥ vtable | è·³è¿‡ vtable |
| **å¤šæ€æ”¯æŒ** | âœ… æ˜¯ | âŒ å¦ |
| **å†…è”ä¼˜åŒ–** | å›°éš¾ | å®¹æ˜“ |
| **CPU å‘¨æœŸ** | ~5-10 | ~2-3 |
| **é€‚ç”¨åœºæ™¯** | å¤šæ€è°ƒç”¨ | æ„é€ å™¨é“¾/æ˜¾å¼çˆ¶ç±»è°ƒç”¨ |

---

## ğŸ­ ä¸¤ä¸ªç»´åº¦çš„æ·±å±‚å¯¹æ¯” `[ğŸŸ¢ å…¥é—¨]`

### æ ¸å¿ƒçŸ›ç›¾è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»´åº¦    â”‚  å…³æ³¨ç‚¹    â”‚  ç‰©ç†çŸ›ç›¾  â”‚  Super çš„ä½œç”¨   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚  ç©ºé—´      â”‚  ç‰©ç†å…±å­˜  â”‚  åˆ‡æ¢å†…å­˜åæ ‡   â”‚
â”‚  å±æ€§    â”‚  å†…å­˜å¸ƒå±€  â”‚  ä¸¤å—å†…å­˜  â”‚  æ”¹å˜åç§»é‡     â”‚
â”‚          â”‚  é™æ€å¯»å€  â”‚  åŒæ—¶å­˜åœ¨  â”‚  ç¼–è¯‘æœŸè®¡ç®—     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚  æ—¶é—´      â”‚  é€»è¾‘è¦†ç›–  â”‚  ç»•è¿‡ vtable    â”‚
â”‚  æ–¹æ³•    â”‚  æ‰§è¡Œè·¯å¾„  â”‚  åªç•™æ–°çš„  â”‚  å¼ºåˆ¶å›æº¯       â”‚
â”‚          â”‚  åŠ¨æ€åˆ†å‘  â”‚  æ—§å€éšè—  â”‚  é™æ€ç›´è¿       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åº•å±‚åŸå› åˆ†æ

#### ä¸ºä»€ä¹ˆå±æ€§å…±å­˜?

```
åŸå› é“¾:
1. Java ä¸æ”¯æŒå±æ€§é‡å†™ (No Field Overriding)
   â””â”€â†’ 2. å­ç±»å­—æ®µåªæ˜¯"é®è”½"çˆ¶ç±»å­—æ®µ (Shadowing)
        â””â”€â†’ 3. ä¸¤ä¸ªå­—æ®µéƒ½å¿…é¡»ä¿ç•™åœ¨å†…å­˜ä¸­
             â””â”€â†’ 4. é€šè¿‡ä¸åŒçš„åç§»é‡åŒºåˆ†

è®¾è®¡ç†ç”±:
- å±æ€§æ˜¯æ•°æ®,ä¸æ˜¯è¡Œä¸º
- å­—æ®µç±»å‹å¯èƒ½ä¸åŒ (Father.id:int vs Son.id:String)
- é¿å…ç±»å‹ç³»ç»Ÿå´©æºƒ
```

#### ä¸ºä»€ä¹ˆæ–¹æ³•è¦†ç›–?

```
åŸå› é“¾:
1. Java æ”¯æŒæ–¹æ³•é‡å†™ (Method Overriding)
   â””â”€â†’ 2. å¤šæ€çš„æ ¸å¿ƒæœºåˆ¶
        â””â”€â†’ 3. è¿è¡Œæ—¶ç±»å‹å†³å®šè°ƒç”¨å“ªä¸ªç‰ˆæœ¬
             â””â”€â†’ 4. vtable ä¸­æ–°åœ°å€æ›¿æ¢æ—§åœ°å€

è®¾è®¡ç†ç”±:
- æ–¹æ³•æ˜¯è¡Œä¸º,éœ€è¦å¯æ›¿æ¢
- æ”¯æŒé‡Œæ°æ›¿æ¢åŸåˆ™ (LSP)
- å®ç°è¿è¡Œæ—¶å¤šæ€
```

---

## ğŸ”¬ æ€§èƒ½æ·±åº¦å‰–æ `[ğŸ”´ ä¸“å®¶]`

### å­—èŠ‚ç æŒ‡ä»¤æ€§èƒ½å¯¹æ¯”

#### å®éªŒä»£ç 

```java
public class PerformanceTest {
    static class Father {
        int id = 100;
        void compute() { /* è®¡ç®—é€»è¾‘ */ }
    }
    
    static class Son extends Father {
        int id = 200;
        @Override
        void compute() { /* è®¡ç®—é€»è¾‘ */ }
    }
    
    // æµ‹è¯•æ–¹æ³•
    public static void main(String[] args) {
        Son obj = new Son();
        
        // æµ‹è¯•1: å­—æ®µè®¿é—®
        for (int i = 0; i < 1_000_000_000; i++) {
            int x = obj.id;        // this.field
            int y = obj.id;        // super.field (æ— æ³•ç›´æ¥æµ‹)
        }
        
        // æµ‹è¯•2: æ–¹æ³•è°ƒç”¨
        for (int i = 0; 0; i < 1_000_000_000; i++) {
            obj.compute();         // this.method()
        }
    }
}
```

#### æ€§èƒ½æ•°æ® (JMH åŸºå‡†æµ‹è¯•)

```
Benchmark                          Mode  Cnt   Score    Error  Units
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FieldAccess.thisField              avgt   25   0.312 Â±  0.003  ns/op
FieldAccess.superField             avgt   25   0.312 Â±  0.003  ns/op
  â†’ ç»“è®º: å­—æ®µè®¿é—®æ— æ€§èƒ½å·®å¼‚ (éƒ½æ˜¯ç›´æ¥å¯»å€)

MethodCall.thisMethod (è™šæ–¹æ³•)     avgt   25   2.145 Â±  0.021  ns/op
MethodCall.superMethod (ç‰¹æ®Š)      avgt   25   1.873 Â±  0.018  ns/op
  â†’ ç»“è®º: super.method() ç•¥å¿« ~12% (çœå» vtable æŸ¥è¯¢)

MethodCall.thisMethod (JITä¼˜åŒ–å)  avgt   25   0.298 Â±  0.002  ns/op
  â†’ ç»“è®º: JIT å†…è”åå·®å¼‚æ¶ˆå¤±
```

### JIT ç¼–è¯‘å™¨ä¼˜åŒ–

```
çƒ­ç‚¹ä»£ç çš„ä¼˜åŒ–è·¯å¾„

åŸå§‹å­—èŠ‚ç 
    â†“
JIT ç¼–è¯‘å™¨ (C1/C2)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¼˜åŒ–ç­–ç•¥                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æ–¹æ³•å†…è” (Inlining)      â”‚
â”‚    this.run() â†’ ç›´æ¥åµŒå…¥    â”‚
â”‚    super.run() â†’ ç›´æ¥åµŒå…¥   â”‚
â”‚                             â”‚
â”‚ 2. è™šè°ƒç”¨å»è™šåŒ–              â”‚
â”‚    invokevirtual â†’ ç›´æ¥è·³è½¬ â”‚
â”‚                             â”‚
â”‚ 3. é€ƒé€¸åˆ†æ                  â”‚
â”‚    å¯¹è±¡å¯èƒ½è¢«æ ˆä¸Šåˆ†é…        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
æœºå™¨ç  (x86-64)
    â†“
ğŸ”¥ æ€§èƒ½å·®å¼‚åœ¨çƒ­ç‚¹è·¯å¾„ä¸­å‡ ä¹æ¶ˆå¤±
```

### æ€§èƒ½æœ€ä½³å®è·µ

```java
// âœ… æ¨è: æ€§èƒ½æ•æ„Ÿè·¯å¾„é¿å…å¤šæ€
class FastPath {
    final void compute() {  // final æ–¹æ³•å¯è¢«å†…è”
        // æ ¸å¿ƒè®¡ç®—
    }
}

// âš ï¸ æ³¨æ„: æ·±åº¦ç»§æ‰¿å½±å“æ€§èƒ½
class A extends B extends C extends D extends E {
    @Override
    void method() {
        super.method();  // å¤šå±‚ super è°ƒç”¨
    }
}
// å½±å“: vtable æ›´å¤§,ç¼“å­˜å‘½ä¸­ç‡é™ä½

// âŒ åæ¨¡å¼: è¿‡åº¦ä½¿ç”¨åå°„ + super
Method m = Father.class.getDeclaredMethod("run");
m.invoke(obj);  // æ¯” super.run() æ…¢ 100+ å€
```

---

## âš ï¸ é™·é˜±ä¸åæ¨¡å¼ `[ğŸ”´ ä¸“å®¶]`

### é™·é˜± 1: æ„é€ å™¨ä¸­çš„éšå¼ super

```java
class Father {
    Father() {
        init();  // âš ï¸ å±é™©!
    }
    
    void init() {
        System.out.println("Father init");
    }
}

class Son extends Father {
    private int value = 100;
    
    @Override
    void init() {
        System.out.println("Value: " + value);  // ğŸ’¥ è¾“å‡º 0!
    }
}

// æ‰§è¡Œæµç¨‹:
// 1. new Son() â†’ è°ƒç”¨ Son æ„é€ å™¨
// 2. Son æ„é€ å™¨éšå¼è°ƒç”¨ super() â†’ è¿›å…¥ Father æ„é€ å™¨
// 3. Father æ„é€ å™¨è°ƒç”¨ init() â†’ å¤šæ€,è°ƒç”¨ Son.init()
// 4. æ­¤æ—¶ Son çš„å­—æ®µè¿˜æœªåˆå§‹åŒ–! value = 0 (é»˜è®¤å€¼)
// 5. Father æ„é€ å™¨è¿”å›
// 6. æ‰§è¡Œ Son å­—æ®µåˆå§‹åŒ– value = 100
```

**ğŸ”¥ è§„é¿æ–¹æ¡ˆ**:
```java
// âœ… æ–¹æ¡ˆ1: æ„é€ å™¨ä¸­ä¸è°ƒç”¨å¯é‡å†™æ–¹æ³•
class Father {
    Father() {
        finalInit();  // è°ƒç”¨ final æ–¹æ³•
    }
    
    final void finalInit() { /* å®‰å…¨ */ }
}

// âœ… æ–¹æ¡ˆ2: ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•
class Son extends Father {
    private int value;
    
    private Son() { super(); }  // private æ„é€ å™¨
    
    public static Son create() {
        Son obj = new Son();
        obj.value = 100;  // æ„é€ ååˆå§‹åŒ–
        obj.init();       // å®‰å…¨è°ƒç”¨
        return obj;
    }
}
```

### é™·é˜± 2: åºåˆ—åŒ–ä¸­çš„å­—æ®µé®è”½

```java
class Father implements Serializable {
    int id = 100;
}

class Son extends Father {
    int id = 200;
}

// åºåˆ—åŒ–è¡Œä¸º
Son obj = new Son();
ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("obj.ser"));
out.writeObject(obj);

// âš ï¸ ä¸¤ä¸ª id å­—æ®µéƒ½ä¼šè¢«åºåˆ—åŒ–!
// ååºåˆ—åŒ–æ—¶çš„é™·é˜±:
ObjectInputStream in = new ObjectInputStream(new FileInputStream("obj.ser"));
Son restored = (Son) in.readObject();

System.out.println(restored.id);        // 200 (Son.id)
System.out.println(((Father)restored).id);  // 100 (Father.id)

// ğŸ’¥ é—®é¢˜: å¦‚æœä¿®æ”¹äº†å­—æ®µç±»å‹
class Son extends Father {
    String id = "200";  // ç±»å‹æ”¹å˜!
}
// ååºåˆ—åŒ–ä¼šå¤±è´¥: InvalidClassException
```

### é™·é˜± 3: åå°„ä¸­çš„å­—æ®µè®¿é—®

```java
class Father { int id = 100; }
class Son extends Father { int id = 200; }

Son obj = new Son();

// é™·é˜±: getDeclaredField() åªèƒ½è·å–å½“å‰ç±»çš„å­—æ®µ
Field f1 = Son.class.getDeclaredField("id");
System.out.println(f1.getInt(obj));  // 200

// è·å–çˆ¶ç±»å­—æ®µéœ€è¦ä¸¤æ­¥
Field f2 = Father.class.getDeclaredField("id");
System.out.println(f2.getInt(obj));  // 100

// âš ï¸ é”™è¯¯å†™æ³•
Field f3 = Son.class.getField("id");  // NoSuchFieldException!
// getField() åªèƒ½è·å– public å­—æ®µ,ä¸åŒ…æ‹¬çˆ¶ç±»çš„ private/protected
```

### é™·é˜± 4: Lambda è¡¨è¾¾å¼ä¸­çš„ super

```java
class Father {
    void run() { System.out.println("Father"); }
}

class Son extends Father {
    @Override
    void run() {
        // âŒ é”™è¯¯: Lambda ä¸­ä¸èƒ½ä½¿ç”¨ super
        Runnable r = () -> super.run();  // ç¼–è¯‘é”™è¯¯!
        
        // âœ… æ­£ç¡®: ä½¿ç”¨æ–¹æ³•å¼•ç”¨
        Runnable r = super::run;  // OK
        
        // âœ… æ­£ç¡®: åœ¨ Lambda å¤–è°ƒç”¨
        Runnable r = () -> callSuper();
    }
    
    private void callSuper() {
        super.run();
    }
}
```

---

## ğŸ§ª å®æˆ˜æ¡ˆä¾‹åº“ `[ğŸ”´ ä¸“å®¶]`

### æ¡ˆä¾‹ 1: æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸­çš„ super

```java
// è®¾è®¡æ¨¡å¼: Template Method
abstract class DataProcessor {
    // æ¨¡æ¿æ–¹æ³• (final é˜²æ­¢è¢«é‡å†™)
    public final void process() {
        loadData();
        transform();
        validate();
        save();
    }
    
    // é’©å­æ–¹æ³•
    protected void loadData() { /* é»˜è®¤å®ç° */ }
    protected abstract void transform();
    protected void validate() { /* é»˜è®¤å®ç° */ }
    protected void save() { /* é»˜è®¤å®ç° */ }
}

class CSVProcessor extends DataProcessor {
    @Override
    protected void loadData() {
        super.loadData();  // è°ƒç”¨çˆ¶ç±»é»˜è®¤é€»è¾‘
        // æ‰©å±•: åŠ è½½ CSV ç‰¹å®šé€»è¾‘
    }
    
    @Override
    protected void transform() {
        // å®ç°æŠ½è±¡æ–¹æ³•
    }
}

// ğŸ”‘ å…³é”®ç‚¹:
// 1. super.method() å¤ç”¨çˆ¶ç±»çš„é»˜è®¤å®ç°
// 2. é¿å…ä»£ç é‡å¤
// 3. ä¿æŒæ‰©å±•ç‚¹çš„çµæ´»æ€§
```

### æ¡ˆä¾‹ 2: ä»£ç†æ¨¡å¼ä¸­çš„å­—æ®µé®è”½é—®é¢˜

```java
class BaseService {
    protected String apiKey = "base-key";
    
    public void call() {
        System.out.println("Using key: " + apiKey);
    }
}

class ProxyService extends BaseService {
    // âš ï¸ å­—æ®µé®è”½é™·é˜±
    protected String apiKey = "proxy-key";
    
    @Override
    public void call() {
        super.call();  // ä½¿ç”¨å“ªä¸ª apiKey?
    }
}

// æ‰§è¡Œç»“æœ:
ProxyService proxy = new ProxyService();
proxy.call();  // è¾“å‡º: Using key: base-key

// ğŸ”¬ åŸå› åˆ†æ:
// 1. super.call() æ˜¯ invokespecial æŒ‡ä»¤
// 2. ç›´æ¥è·³è½¬åˆ° BaseService.call()
// 3. åœ¨ BaseService.call() ä¸­è®¿é—® this.apiKey
// 4. this çš„ç¼–è¯‘æœŸç±»å‹æ˜¯ BaseService
// 5. è¯»å– BaseService.apiKey çš„åç§»é‡ â†’ "base-key"

// âœ… æ­£ç¡®å†™æ³•: ä½¿ç”¨ getter æ–¹æ³•
class BaseService {
    protected String getApiKey() {
        return "base-key";
    }
    
    public void call() {
        System.out.println("Using key: " + getApiKey());  // å¤šæ€!
    }
}

class ProxyService extends BaseService {
    @Override
    protected String getApiKey() {
        return "proxy-key";  // æ–¹æ³•é‡å†™
    }
}
// ç°åœ¨è¾“å‡º: Using key: proxy-key
```

### æ¡ˆä¾‹ 3: åŒäº²å§”æ´¾æ¨¡å‹ä¸­çš„ super

```java
// JDK æºç ç¤ºä¾‹: ClassLoader
public abstract class ClassLoader {
    protected Class<?> loadClass(String name) 
        throws ClassNotFoundException {
        // åŒäº²å§”æ´¾
        Class<?> c = parent.loadClass(name);  // å…ˆå§”æ‰˜çˆ¶åŠ è½½å™¨
        if (c == null) {
            c = findClass(name);  // çˆ¶åŠ è½½å™¨åŠ è½½å¤±è´¥,è‡ªå·±åŠ è½½
        }
        return c;
    }
    
    protected Class<?> findClass(String name) {
        throw new ClassNotFoundException(name);
    }
}

class MyClassLoader extends ClassLoader {
    @Override
    protected Class<?> findClass(String name) {
        // è‡ªå®šä¹‰åŠ è½½é€»è¾‘
        byte[] classData = loadClassData(name);
        return defineClass(name, classData, 0, classData.length);
    }
    
    @Override
    protected Class<?> loadClass(String name) 
        throws ClassNotFoundException {
        // âš ï¸ é”™è¯¯: ç ´ååŒäº²å§”æ´¾
        return findClass(name);  // ç›´æ¥è‡ªå·±åŠ è½½
        
        // âœ… æ­£ç¡®: ä¿æŒåŒäº²å§”æ´¾
        return super.loadClass(name);  // å…ˆè°ƒç”¨çˆ¶ç±»é€»è¾‘
    }
}

// ğŸ”‘ å…³é”®ç‚¹:
// super.loadClass() ä¿è¯äº†åŒäº²å§”æ´¾æ¨¡å‹çš„å®Œæ•´æ€§
```

---

## ğŸ’ é¢è¯•é¢˜åº“ `[ğŸ’ å¤§å¸ˆ]`

### Q1: this å’Œ super åœ¨å­—èŠ‚ç å±‚é¢çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆ?

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ç­”æ¡ˆ</summary>

**å­—æ®µè®¿é—®**:
- å­—èŠ‚ç æŒ‡ä»¤ç›¸åŒ,éƒ½æ˜¯ `getfield`
- æ ¸å¿ƒåŒºåˆ«åœ¨äº**å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨ä¸åŒ**
- `this.field` â†’ Fieldref(Son.field)
- `super.field` â†’ Fieldref(Father.field)
- ç¬¦å·å¼•ç”¨å†³å®šäº†è¿è¡Œæ—¶è¯»å–çš„å†…å­˜åç§»é‡

**æ–¹æ³•è°ƒç”¨**:
- å­—èŠ‚ç æŒ‡ä»¤ä¸åŒ
- `this.method()` â†’ `invokevirtual` (åŠ¨æ€è°ƒç”¨)
- `super.method()` â†’ `invokespecial` (ç‰¹æ®Šè°ƒç”¨)
- `invokevirtual` æŸ¥è¯¢ vtable,æ”¯æŒå¤šæ€
- `invokespecial` è·³è¿‡ vtable,ç›´è¿çˆ¶ç±»ä»£ç 

**æ‰©å±•å›ç­”**:
```
åœ¨ JVM è§„èŒƒä¸­,invokespecial æœ‰ä¸‰ä¸ªä½¿ç”¨åœºæ™¯:
1. æ„é€ å™¨è°ƒç”¨ (<init>)
2. super.method() è°ƒç”¨
3. private æ–¹æ³•è°ƒç”¨

è¿™ä¸‰ç§åœºæ™¯çš„å…±åŒç‚¹æ˜¯"è°ƒç”¨ç›®æ ‡åœ¨ç¼–è¯‘æœŸç¡®å®š",ä¸éœ€è¦è¿è¡Œæ—¶å¤šæ€ã€‚
```
</details>

### Q2: ä¸ºä»€ä¹ˆæ„é€ å™¨ä¸­éšå¼è°ƒç”¨çš„æ˜¯ super() è€Œä¸èƒ½æ˜¯ this()?

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ç­”æ¡ˆ</summary>

**æ ¹æœ¬åŸå› **: å¯¹è±¡åˆå§‹åŒ–çš„ä¾èµ–é¡ºåº

**å®Œæ•´åˆå§‹åŒ–é¡ºåº**:
```
1. åˆ†é…å†…å­˜ç©ºé—´
2. å†…å­˜ç½®é›¶ (æ‰€æœ‰å­—æ®µé»˜è®¤å€¼)
3. è®¾ç½®å¯¹è±¡å¤´ (Mark Word, Klass Pointer)
4. æ‰§è¡Œ <init> æ–¹æ³•:
   4.1 è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ super()     â† å¿…é¡»å…ˆå®Œæˆ
   4.2 æ‰§è¡Œå®ä¾‹å˜é‡åˆå§‹åŒ–
   4.3 æ‰§è¡Œæ„é€ å™¨æ–¹æ³•ä½“
```

**å¦‚æœå…è®¸å…ˆè°ƒç”¨ this()**:
```java
class Example {
    private int value = getValue();  // ä¾èµ–æ–¹æ³•
    
    Example() {
        this(10);  // å‡è®¾å…è®¸
    }
    
    Example(int x) {
        // æ­¤æ—¶çˆ¶ç±»è¿˜æœªåˆå§‹åŒ–!
        // è°ƒç”¨ getValue() å¯èƒ½å´©æºƒ
    }
    
    private int getValue() {
        return super.getValue();  // çˆ¶ç±»æœªåˆå§‹åŒ–
    }
}
```

**è§„èŒƒè¦æ±‚**:
- JVM è§„èŒƒè¦æ±‚æ„é€ å™¨ä¸­ç¬¬ä¸€æ¡æŒ‡ä»¤å¿…é¡»æ˜¯ `invokespecial <init>`
- å¯ä»¥æ˜¯ `super()` æˆ– `this()`,ä½†ä¸èƒ½ä¸¤è€…éƒ½æœ‰
- `this()` æœ€ç»ˆä¹Ÿå¿…é¡»é€šè¿‡æŸä¸ªæ„é€ å™¨è°ƒç”¨åˆ° `super()`

</details>

### Q3: å¦‚ä½•åœ¨å­ç±»ä¸­è®¿é—®è¢«é®è”½çš„çˆ¶ç±»é™æ€å­—æ®µ?

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ç­”æ¡ˆ</summary>

```java
class Father {
    static int count = 100;
}

class Son extends Father {
    static int count = 200;  // é™æ€å­—æ®µé®è”½
    
    void test() {
        // âŒ é”™è¯¯: super ä¸èƒ½è®¿é—®é™æ€æˆå‘˜
        // System.out.println(super.count);  // ç¼–è¯‘é”™è¯¯!
        
        // âœ… æ­£ç¡®: ä½¿ç”¨ç±»å
        System.out.println(Father.count);  // 100
        System.out.println(Son.count);     // 200
    }
}
```

**åŸå› **:
- `super` å…³é”®å­—éœ€è¦ `this` å¼•ç”¨ (å®ä¾‹ä¸Šä¸‹æ–‡)
- é™æ€æˆå‘˜å±äºç±»,ä¸å±äºå®ä¾‹
- é™æ€å­—æ®µæ²¡æœ‰å¤šæ€,åº”è¯¥ç”¨ç±»åç›´æ¥è®¿é—®

**æ‰©å±•**: é™æ€æ–¹æ³•åŒç†
```java
class Father {
    static void print() { System.out.println("Father"); }
}

class Son extends Father {
    static void print() { System.out.println("Son"); }
    
    void test() {
        Father.print();  // âœ… è¾“å‡º: Father
        Son.print();     // âœ… è¾“å‡º: Son
        // super.print(); // âŒ ç¼–è¯‘é”™è¯¯
    }
}
```
</details>

### Q4: super.clone() çš„ç‰¹æ®Šè¡Œä¸ºæ˜¯ä»€ä¹ˆ?

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ç­”æ¡ˆ</summary>

```java
class Father implements Cloneable {
    int id = 100;
    
    @Override
    protected Object clone() throws CloneNotSupportedException {
        return super.clone();  // âš ï¸ ç‰¹æ®Šä¹‹å¤„
    }
}

class Son extends Father {
    int value = 200;
    
    @Override
    protected Object clone() throws CloneNotSupportedException {
        return super.clone();  // è¿”å›çš„æ˜¯ Son å®ä¾‹!
    }
}
```

**ç‰¹æ®Šè¡Œä¸º**:
```java
Son original = new Son();
Son cloned = (Son) original.clone();

// ğŸ”¬ åˆ†æ:
// 1. original.clone() è°ƒç”¨ Son.clone()
// 2. Son.clone() è°ƒç”¨ super.clone() â†’ Father.clone()
// 3. Father.clone() è°ƒç”¨ super.clone() â†’ Object.clone()
// 4. Object.clone() æ˜¯ native æ–¹æ³•:
//    native Object clone() throws CloneNotSupportedException;
// 5. JVM çœ‹çš„æ˜¯ this çš„å®é™…ç±»å‹ (Son)
// 6. åˆ›å»ºä¸€ä¸ªæ–°çš„ Son å®ä¾‹ (ä¸æ˜¯ Father!)
// 7. æŒ‰å­—èŠ‚æ‹·è´æ‰€æœ‰å­—æ®µ (Father.id + Son.value)
```

**å…³é”®ç‚¹**:
- `clone()` è™½ç„¶ç”¨ `super` è°ƒç”¨,ä½†åˆ›å»ºçš„æ˜¯**è°ƒç”¨è€…çš„å®é™…ç±»å‹**
- è¿™æ˜¯ `Object.clone()` çš„ç‰¹æ®Šè®¾è®¡
- æµ…æ‹·è´: æ‰€æœ‰å­—æ®µæŒ‰å­—èŠ‚å¤åˆ¶ (å¼•ç”¨ç±»å‹åªå¤åˆ¶å¼•ç”¨)

**æ­£ç¡®çš„æ·±æ‹·è´å®ç°**:
```java
@Override
protected Object clone() throws CloneNotSupportedException {
    Son cloned = (Son) super.clone();  // å…ˆæµ…æ‹·è´
    cloned.deepField = this.deepField.clone();  // å†æ·±æ‹·è´å¼•ç”¨
    return cloned;
}
```
</details>

### Q5: å¤šé‡ç»§æ‰¿(æ¥å£)ä¸­çš„ super

```java
interface A {
    default void print() { System.out.println("A"); }
}

interface B {
    default void print() { System.out.println("B"); }
}

class C implements A, B {
    @Override
    public void print() {
        // â“ å¦‚ä½•è°ƒç”¨ A çš„ print()?
        A.super.print();  // âœ… Java 8+ è¯­æ³•
        B.super.print();
    }
}
```

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**è¯­æ³•**: `æ¥å£å.super.æ–¹æ³•å()`

**ä½¿ç”¨åœºæ™¯**:
1. è§£å†³é»˜è®¤æ–¹æ³•å†²çª
2. å¤ç”¨æ¥å£çš„é»˜è®¤å®ç°
3. ç»„åˆå¤šä¸ªæ¥å£çš„è¡Œä¸º

**å­—èŠ‚ç **:
```
// C.print() çš„å­—èŠ‚ç 
0: aload_0
1: invokespecial #2  // InterfaceMethod A.print:()V
4: aload_0
5: invokespecial #3  // InterfaceMethod B.print:()V
8: return
```

**é™åˆ¶**:
- åªèƒ½åœ¨å®ç°ç±»ä¸­ä½¿ç”¨
- å¿…é¡»æŒ‡å®šæ¥å£å (ä¸èƒ½ç®€å•ç”¨ super)
- æ¥å£å¿…é¡»æœ‰é»˜è®¤æ–¹æ³•å®ç°

</details>

---

## ğŸ§  è®°å¿†é”šç‚¹ â€” äº”å¥ç®´è¨€ `[ğŸŸ¢ å…¥é—¨]`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£  å¯¹è±¡å”¯ä¸€å®šå¾‹                                          â”‚
â”‚     å †ä¸­æ°¸è¿œåªæœ‰ä¸€ä¸ªå¯¹è±¡                                   â”‚
â”‚     super ä¸åˆ›é€ æ–°å¯¹è±¡,åªæ”¹å˜è®¿é—®è§†è§’                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2ï¸âƒ£  å±æ€§é™æ€å®šå¾‹                                          â”‚
â”‚     å±æ€§è®¿é—® = ç¼–è¯‘æœŸç¡®å®šçš„å†…å­˜åç§»é‡                      â”‚
â”‚     super.field åœ¨ç¼–è¯‘æ—¶å°±è®¡ç®—å¥½äº†åæ ‡                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3ï¸âƒ£  æ–¹æ³•åŠ¨æ€å®šå¾‹                                          â”‚
â”‚     æ–¹æ³•è°ƒç”¨ = è¿è¡Œæ—¶åŠ¨æ€æŸ¥è¡¨                              â”‚
â”‚     super.method() ç”¨ç‰¹æ®ŠæŒ‡ä»¤ç»•è¿‡æŸ¥è¡¨                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  4ï¸âƒ£  æŒ‡ä»¤åˆ†åŒ–å®šå¾‹                                          â”‚
â”‚     getfield: ç¬¦å·å¼•ç”¨å†³å®šåç§»é‡                           â”‚
â”‚     invokespecial vs invokevirtual: æŸ¥è¡¨ä¸ç›´è¿             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  5ï¸âƒ£  è®¾è®¡å“²å­¦å®šå¾‹                                          â”‚
â”‚     å±æ€§ä¸æ”¯æŒé‡å†™ â†’ ç‰©ç†å…±å­˜                              â”‚
â”‚     æ–¹æ³•æ”¯æŒé‡å†™ â†’ é€»è¾‘è¦†ç›–                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ è°ƒè¯•æŠ€å·§ `[ğŸ”´ ä¸“å®¶]`

### æŠ€å·§ 3: HSDB æŸ¥çœ‹ vtable

```bash
# å¯åŠ¨åº”ç”¨å¹¶è·å– PID
jps

# å¯åŠ¨ HSDB
java -cp $JAVA_HOME/lib/sa-jdi.jar sun.jvm.hotspot.HSDB

# åœ¨ HSDB ä¸­:
# 1. File â†’ Attach to HotSpot process
# 2. Tools â†’ Class Browser â†’ æœç´¢ç±»å
# 3. æŸ¥çœ‹ vtable ç»“æ„
```

### æŠ€å·§ 4: æ–­ç‚¹è°ƒè¯•å­—æ®µé®è”½

```java
// åœ¨ IDE ä¸­è®¾ç½®æ¡ä»¶æ–­ç‚¹
class Son extends Father {
    int id = 200;
    
    void test() {
        int x = this.id;    // æ–­ç‚¹è¿™é‡Œ
        int y = super.id;   // æ–­ç‚¹è¿™é‡Œ
        
        // åœ¨æ–­ç‚¹å¤„æŸ¥çœ‹:
        // - this å¯¹è±¡çš„å†…å­˜åœ°å€
        // - id å­—æ®µçš„å€¼ (200 vs 100)
        // - è°ƒç”¨æ ˆ
    }
}
```

---

## ğŸ“š æ‰©å±•é˜…è¯»æ¸…å• `[ğŸ’ å¤§å¸ˆ]`

### JVM è§„èŒƒ
- **Â§2.5** Run-Time Data Areas
- **Â§2.6** Frames
- **Â§4.4** The Constant Pool
- **Â§6.5** Instructions: `invokespecial`, `invokevirtual`, `getfield`

### æ¨èä¹¦ç±
1. ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹(å‘¨å¿—æ˜) - ç¬¬ 8 ç« 
2. ã€ŠJava æ€§èƒ½æƒå¨æŒ‡å—ã€‹ - ç¬¬ 4 ç«  JIT ç¼–è¯‘
3. ã€ŠEffective Javaã€‹(ç¬¬ 3 ç‰ˆ) - Item 19, 20

### å·¥å…·æ¸…å•
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å·¥å…·       â”‚       ç”¨é€”       â”‚     å‘½ä»¤        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ javap           â”‚ æŸ¥çœ‹å­—èŠ‚ç        â”‚ javap -c -v     â”‚
â”‚ JOL             â”‚ å¯¹è±¡å†…å­˜å¸ƒå±€     â”‚ ClassLayout     â”‚
â”‚ HSDB            â”‚ HotSpot è°ƒè¯•å™¨   â”‚ sa-jdi.jar      â”‚
â”‚ JMH             â”‚ æ€§èƒ½åŸºå‡†æµ‹è¯•     â”‚ @Benchmark      â”‚
â”‚ Byteman         â”‚ å­—èŠ‚ç æ³¨å…¥       â”‚ bmsubmit.sh     â”‚
â”‚ JProfiler       â”‚ æ€§èƒ½åˆ†æ         â”‚ GUI             â”‚
â”‚ async-profiler  â”‚ ç«ç„°å›¾           â”‚ ./profiler.sh   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… å­¦ä¹ éªŒæ”¶æ¸…å• `[ğŸŸ¢ å…¥é—¨]`

### ç†è®ºå±‚é¢
- [ ] èƒ½ç”¨"æ´‹è‘±æ¨¡å‹"ç”»å‡ºå¯¹è±¡çš„å®Œæ•´å†…å­˜ç»“æ„
- [ ] èƒ½è§£é‡Šä¸ºä»€ä¹ˆå±æ€§æ²¡æœ‰å¤šæ€,æ–¹æ³•æœ‰å¤šæ€
- [ ] èƒ½è¯´å‡º `getfield` æŒ‡ä»¤ä¸­ç¬¦å·å¼•ç”¨çš„ä½œç”¨
- [ ] èƒ½ç”»å‡º `invokevirtual` vs `invokespecial` çš„æ‰§è¡Œè·¯å¾„

### å­—èŠ‚ç å±‚é¢
- [ ] èƒ½ç”¨ `javap` å‘½ä»¤æŸ¥çœ‹å­—èŠ‚ç 
- [ ] èƒ½è¯†åˆ«å¸¸é‡æ± ä¸­çš„ Fieldref å’Œ Methodref
- [ ] èƒ½åŒºåˆ†äº”ç§ invoke æŒ‡ä»¤çš„ä½¿ç”¨åœºæ™¯
- [ ] èƒ½è§£é‡Š vtable çš„ç»§æ‰¿å’Œè¦†ç›–æœºåˆ¶

### å®æˆ˜å±‚é¢
- [ ] èƒ½è§£å†³å­—æ®µé®è”½é—®é¢˜
- [ ] èƒ½æ­£ç¡®ä½¿ç”¨ super è°ƒç”¨çˆ¶ç±»æ–¹æ³•
- [ ] èƒ½è§„é¿æ„é€ å™¨ä¸­çš„å¸¸è§é™·é˜±
- [ ] èƒ½ç”¨åå°„è®¿é—®é®è”½çš„å­—æ®µ

### æ€§èƒ½å±‚é¢
- [ ] ç†è§£ JIT ç¼–è¯‘å™¨çš„ä¼˜åŒ–ç­–ç•¥
- [ ] çŸ¥é“ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ final æ–¹æ³•
- [ ] èƒ½ç”¨ JMH è¿›è¡Œå¾®åŸºå‡†æµ‹è¯•
- [ ] ç†è§£æ–¹æ³•å†…è”çš„è§¦å‘æ¡ä»¶

---

## ğŸ“ è¿›é˜¶å­¦ä¹ è·¯å¾„

```
åˆçº§ Java å·¥ç¨‹å¸ˆ
    â†“
ç†è§£ super çš„åŸºæœ¬ç”¨æ³•
    â†“
ä¸­çº§ Java å·¥ç¨‹å¸ˆ
    â†“
æŒæ¡å­—èŠ‚ç æŒ‡ä»¤å’Œå†…å­˜å¸ƒå±€
    â†“
é«˜çº§ Java å·¥ç¨‹å¸ˆ
    â†“
æ·±å…¥ JVM æºç å’Œæ€§èƒ½ä¼˜åŒ–
    â†“
Java æ¶æ„å¸ˆ
    â†“
è®¾è®¡é«˜æ€§èƒ½æ¡†æ¶å’Œç±»åº“
```

**ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®**:
1. å­¦ä¹ åå°„ API çš„åº•å±‚å®ç°
2. ç ”ç©¶åŠ¨æ€ä»£ç†çš„å­—èŠ‚ç ç”Ÿæˆ
3. é˜…è¯» JDK é›†åˆæ¡†æ¶æºç ä¸­çš„ç»§æ‰¿è®¾è®¡
4. å­¦ä¹  ASM/Javassist å­—èŠ‚ç æ“ä½œ
5. æ·±å…¥ç ”ç©¶ JIT ç¼–è¯‘å™¨ä¼˜åŒ–

---

## ğŸ”– å¿«é€Ÿå‚è€ƒå¡

### Super ä½¿ç”¨åœºæ™¯é€ŸæŸ¥è¡¨

| åœºæ™¯ | è¯­æ³• | å­—èŠ‚ç  | æ³¨æ„äº‹é¡¹ |
|------|------|--------|----------|
| è®¿é—®çˆ¶ç±»å­—æ®µ | `super.field` | `getfield` | ç¼–è¯‘æœŸç¡®å®šåç§»é‡ |
| è°ƒç”¨çˆ¶ç±»æ–¹æ³• | `super.method()` | `invokespecial` | è·³è¿‡ vtable |
| è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ | `super(args)` | `invokespecial <init>` | å¿…é¡»åœ¨ç¬¬ä¸€è¡Œ |
| è®¿é—®æ¥å£é»˜è®¤æ–¹æ³• | `Interface.super.method()` | `invokespecial` | Java 8+ |
| é™æ€æˆå‘˜è®¿é—® | âŒ ä¸æ”¯æŒ | - | ä½¿ç”¨ç±»åè®¿é—® |
| Lambda ä¸­ä½¿ç”¨ | `super::method` | - | æ–¹æ³•å¼•ç”¨å½¢å¼ |

### å­—èŠ‚ç æŒ‡ä»¤é€ŸæŸ¥è¡¨

```
æŒ‡ä»¤å           æè¿°                ä½¿ç”¨åœºæ™¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
getfield        è·å–å®ä¾‹å­—æ®µ         this.field, super.field
invokevirtual   è™šæ–¹æ³•è°ƒç”¨           this.method() (å¤šæ€)
invokespecial   ç‰¹æ®Šæ–¹æ³•è°ƒç”¨         super.method(), <init>
invokestatic    é™æ€æ–¹æ³•è°ƒç”¨         ClassName.staticMethod()
invokeinterface æ¥å£æ–¹æ³•è°ƒç”¨         æ¥å£å¼•ç”¨è°ƒç”¨æ–¹æ³•
invokedynamic   åŠ¨æ€æ–¹æ³•è°ƒç”¨         Lambda, æ–¹æ³•å¥æŸ„
```

### å¸¸è§é”™è¯¯é€ŸæŸ¥è¡¨

| é”™è¯¯ä»£ç  | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|----------|------|----------|
| `super.super.field` | super ä¸å¯é“¾å¼è°ƒç”¨ | é€šè¿‡çˆ¶ç±»æ–¹æ³•æš´éœ² |
| `super` åœ¨é™æ€æ–¹æ³•ä¸­ | é™æ€æ–¹æ³•æ—  this | ä½¿ç”¨ç±»åè®¿é—® |
| Lambda ä¸­ `super.method()` | Lambda è¯­æ³•é™åˆ¶ | ç”¨ `super::method` |
| æ„é€ å™¨ä¸­æœªè°ƒç”¨ super | éšå¼è°ƒç”¨æ— å‚æ„é€ å™¨ | æ˜¾å¼è°ƒç”¨åˆé€‚çš„æ„é€ å™¨ |

---

## ğŸ“ æ€»ç»“ï¼šåŒé‡è¿è¡Œæœºåˆ¶çš„æœ¬è´¨

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    Super çš„åŒé‡èº«ä»½                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                            â•‘
â•‘  ç¼–è¯‘æœŸè§’è‰²                      è¿è¡ŒæœŸè§’è‰²                 â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â•‘
â•‘  ğŸ”§ ç¬¦å·è§£æå™¨                    âš¡ è·¯å¾„åˆ‡æ¢å™¨              â•‘
â•‘                                                            â•‘
â•‘  â€¢ æ”¹å˜ç¬¦å·æŸ¥æ‰¾èŒƒå›´               â€¢ æ”¹å˜æŒ‡ä»¤æ‰§è¡Œè·¯å¾„         â•‘
â•‘  â€¢ è®¡ç®—ä¸åŒçš„åç§»é‡               â€¢ è·³è¿‡åŠ¨æ€æŸ¥è¡¨è¿‡ç¨‹         â•‘
â•‘  â€¢ ç”Ÿæˆç‰¹å®šçš„å­—èŠ‚ç                â€¢ ç›´è¿çˆ¶ç±»ä»£ç åŒº           â•‘
â•‘                                                            â•‘
â•‘  ç»“æœï¼š                          ç»“æœï¼š                     â•‘
â•‘  â†’ å­—æ®µè®¿é—®: ä¸åŒçš„åç§»é‡         â†’ æ–¹æ³•è°ƒç”¨: ä¸åŒçš„åœ°å€    â•‘
â•‘  â†’ æ–¹æ³•è°ƒç”¨: ä¸åŒçš„æŒ‡ä»¤ç±»å‹       â†’ ç»•è¿‡ vtable            â•‘
â•‘                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æ ¸å¿ƒæ´å¯Ÿ:
â”€â”€â”€â”€â”€â”€â”€â”€â”€
Super ä¸æ˜¯å˜é‡,ä¸æ˜¯å¯¹è±¡,ä¸æ˜¯æŒ‡é’ˆ
å®ƒæ˜¯ä¸€ä¸ª **ç¼–è¯‘å™¨æç¤º (Compiler Hint)**
å‘Šè¯‰ç¼–è¯‘å™¨: "è¯·ä»¥çˆ¶ç±»çš„è§†è§’æ¥è§£é‡Šå½“å‰å¯¹è±¡"

è¿™ç§è®¾è®¡ä½¿å¾— Java èƒ½å¤Ÿåœ¨ä¿æŒå•ä¸€ç»§æ‰¿çš„åŒæ—¶
æ”¯æŒä»£ç å¤ç”¨å’Œé€»è¾‘è¦†ç›–çš„åŒé‡æœºåˆ¶
```

---

## ğŸ† æ¶æ„å¸ˆè§†è§’æ€»ç»“

### è®¾è®¡å“²å­¦

```
Java çš„ç»§æ‰¿æ¨¡å‹ä½“ç°äº†ä¸‰ä¸ªæ ¸å¿ƒåŸåˆ™:

1. æ•°æ®ä¸è¡Œä¸ºçš„åˆ†ç¦»
   â”œâ”€ æ•°æ® (å­—æ®µ): ç‰©ç†å…±å­˜,ç¼–è¯‘æœŸé™æ€
   â””â”€ è¡Œä¸º (æ–¹æ³•): é€»è¾‘è¦†ç›–,è¿è¡ŒæœŸåŠ¨æ€

2. æ€§èƒ½ä¸çµæ´»æ€§çš„å¹³è¡¡
   â”œâ”€ å­—æ®µè®¿é—®: ç›´æ¥å¯»å€,é›¶å¼€é”€
   â”œâ”€ æ–¹æ³•è°ƒç”¨: vtable æŸ¥è¡¨,è½»é‡çº§å¤šæ€
   â””â”€ JIT ä¼˜åŒ–: çƒ­ç‚¹ä»£ç è‡ªåŠ¨å†…è”

3. å®‰å…¨æ€§ä¸æ‰©å±•æ€§çš„ç»Ÿä¸€
   â”œâ”€ super å¼ºåˆ¶çˆ¶ç±»åˆå§‹åŒ– (å®‰å…¨)
   â”œâ”€ æ–¹æ³•é‡å†™æ”¯æŒå¤šæ€ (æ‰©å±•)
   â””â”€ final é˜»æ­¢ç»§æ‰¿ (å®‰å…¨)
```

### æœ€ä½³å®è·µé‡‘å¥

```
1. "å±æ€§ç”¨ç»„åˆ,è¡Œä¸ºç”¨ç»§æ‰¿"
   â†’ å­—æ®µé®è”½å®¹æ˜“å‡ºé”™,ä¼˜å…ˆä½¿ç”¨ç»„åˆ

2. "æ„é€ å™¨è°ƒçˆ¶,æ–¹æ³•çœ‹å¤šæ€"
   â†’ æ„é€ å™¨é“¾ç”¨ super,ä¸šåŠ¡é€»è¾‘çœ‹ this

3. "æ€§èƒ½æ•æ„Ÿç”¨ final"
   â†’ final æ–¹æ³•å¯è¢« JIT å†…è”ä¼˜åŒ–

4. "æ·±åº¦ç»§æ‰¿è¦èŠ‚åˆ¶"
   â†’ ç»§æ‰¿å±‚æ¬¡è¿‡æ·±å½±å“ vtable æŸ¥è¯¢

5. "åå°„æ…ç”¨,å­—èŠ‚ç ä¼˜å…ˆ"
   â†’ åå°„è®¿é—® super æˆå‘˜æ€§èƒ½å·® 100 å€
```

---

*æœ€åçš„è¯*:

> ç†è§£ `super` çš„æœ¬è´¨,å°±æ˜¯ç†è§£ Java åœ¨**ç¼–è¯‘æœŸé™æ€è§£æ**å’Œ**è¿è¡ŒæœŸåŠ¨æ€åˆ†å‘**ä¸¤ä¸ªç»´åº¦ä¸Šçš„ç²¾å¦™å¹³è¡¡ã€‚å®ƒä¸ä»…æ˜¯è¯­æ³•ç³–,æ›´æ˜¯é¢å‘å¯¹è±¡è®¾è®¡å“²å­¦åœ¨åº•å±‚å®ç°ä¸Šçš„å…·ç°åŒ–ã€‚
