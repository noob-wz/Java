在 Java 中，主要的变量就是成员变量和局部变量(局部变量一般就是在成员方法中定义的变量)，而变量的作用域主要分为两大类：**可见性作用域（访问控制）** 和 **生命周期作用域（变量的生存期）**。

---

## 一、 变量的生命周期作用域 (Variable Scope)

这决定了一个变量何时被创建，何时被销毁，以及它能在代码的哪个区域内被访问。

| 作用域名称   | 定义位置                           | 生命周期                                                       | 可访问范围                                                                           |
| :----------- | :--------------------------------- | :------------------------------------------------------------- | :----------------------------------------------------------------------------------- |
| **局部变量** | 方法体内部、代码块 `{}` 内部       | 进入代码块时创建，退出代码块时销毁（存储在栈帧的局部变量表）。 | **仅在定义它的 `{}` 内部**                                                           |
| **实例变量** | 类内部，方法外部，无 `static` 修饰 | 随 **对象实例** 创建而生，随对象被垃圾回收而亡（存储在堆上）。 | **作用域为整个对象，属于该对象的任何实例方法都可以访问**。                           |
| **静态变量** | 类内部，方法外部，有 `static` 修饰 | 随 **类加载** 而生，随类卸载而亡（存储在方法区）。             | **作用域为整个类（包括对象），该类的所有方法（包括静态方法和实例方法）都可以访问。** |

> 注意：成员变量可以加修饰符，但局部变量不可以加修饰符

### 关键点：变量隐藏

变量隐藏的场景：

1. 当你有一个变量，在其**更小的作用域** （比如一个方法内部、循环内部等）定义了一个**同名** 变量时。小作用域的变量会暂时“遮盖”住大作用域的变量。
2. 在方法内部定义了一个与**实例变量**或**静态变量**同名的局部变量，则在方法内部，**局部变量会“隐藏”** 实例/静态变量。
   - 要访问被隐藏的实例变量，必须使用 `this.variableName`。
   - 要访问被隐藏的静态变量，必须使用 `ClassName.variableName`。

---

## 二、 可见性作用域 (Access Modifiers)

可见性作用域由 Java 的四个**访问修饰符 (Access Modifiers)** 控制，决定了**类、方法**和**成员变量**能被哪些代码（同一个类、同一个包、继承的子类、任何地方）看到和使用。

为了更好地理解，我们以一个表格和图示来展示它们之间的关系：

| 修饰符     | 关键字      | 级别       | 同一个类 | 同一个包 (Package) | 子类 (不同包) | 任何地方 |
| :--------- | :---------- | :--------- | :------- | :----------------- | :------------ | :------- |
| **公共**   | `public`    | **最宽松** | ✅       | ✅                 | ✅            | ✅       |
| **受保护** | `protected` |            | ✅       | ✅                 | ✅            | ❌       |
| **默认**   | (无)        |            | ✅       | ✅                 | ❌            | ❌       |
| **私有**   | `private`   | **最严格** | ✅       | ❌                 | ❌            | ❌       |

### 1. `private` (私有)

- **特点：** 只能在**当前类内部**访问。
- **用途：** 封装（Encapsulation）。用于隐藏类的内部实现细节，防止外部直接修改对象的状态，保证数据安全。这是面向对象设计的基础。

### 2. (默认/Package-Private)

- **特点：** 只能在**同一个包 (Package)** 内访问。
- **用途：** 当你希望某些工具类或数据结构只在特定的模块（包）内部共享，但不暴露给外部用户时使用。

### 3. `protected` (受保护)

- **特点：** 可以在**同一个包**内访问；也可以被**不同包的子类**通过继承访问。
- **用途：** 主要用于继承。允许子类访问父类的成员，但对外面的无关类保持隐藏。

### 4. `public` (公共)

- **特点：** 可以在**任何地方**访问。
- **用途：** 用于定义类的公共接口，或供外部程序调用的方法。

### 💡 总结：访问修饰符的选择原则

在设计一个类时，通常推荐遵循 **“最小权限原则”**：

> **尽可能使用最严格的访问级别来修饰成员，除非有必要放宽。**

- **实例变量：** 大多数情况下应为 `private`，通过 `public` 的 Getter/Setter 方法（接口）来访问和修改，以实现封装。
- **工具方法：** 如果方法只用于辅助本类内部的公共方法，应设为 `private`。
- **核心 API：** 只有作为公共接口提供给外部用户调用的方法才应该设为 `public`。
