# java.lang 包实例化规则核心笔记

## 1. 核心

很多初学者容易混淆 `java.lang` 的**特权**与**用法**：

* **特权 (Privilege)：** `java.lang` 包下的所有类，编译器会自动导入。
  * **结论：** 不需要写 `import`。


* **用法 (Usage)：** 是否需要 `new`，取决于类的设计模式（是 **工具类、普通类还是特殊类** ），而不是因为它在 `java.lang` 包里。
  * **结论：** **绝大多数类依然需要 `new`。**



---

## 2. 三种使用场景分类详解

根据“是否需要 `new`”，我们可以将 `java.lang` 下的类分为三类：

### 2.1 第一类：绝对不能 new (工具类)

这类类通常全是 **静态方法 (Static Methods)**。它们像是一个公共的工具箱，挂在墙上直接用，不允许你私自制造（实例化）一个对象。

* **原理：** 它们的构造方法 (Constructor) 被设计为 `private`。
* **代表类：** `Math`, `System`
* **典型报错：** `'Math()' has private access in 'java.lang.Math'`

```java
// ✅ 正确用法：直接通过类名调用静态方法
double abs = Math.abs(-10);
long time = System.currentTimeMillis();

// ❌ 错误用法：试图实例化
// Math m = new Math(); // 编译报错！
// System s = new System(); // 编译报错！

```

### 2.2 第二类：可以不 new (特权/语法糖)

Java 为了开发效率，给极少数最高频使用的类开了“后门”（语法糖），允许直接赋值。编译器在底层会自动处理。

* **原理：** 字符串常量池、自动装箱 (Auto-Boxing)。
* **代表类：** `String`, 包装类 (`Integer`, `Long`, `Boolean` 等)

```java
// --- String 的特权 ---
// ✅ 推荐：直接赋值 (使用常量池)
String name = "Java";

// ⚠️ 允许但少用：强制新建对象 (不使用常量池)
String name2 = new String("Java");


// --- 包装类的特权 ---
// ✅ 推荐：自动装箱 (int -> Integer)
Integer age = 18;

// ⚠️ 允许但已废弃：Java 9 之后不推荐这样写
Integer age2 = new Integer(18);

```

### 2.3 第三类：必须 new (普通公民)

这是 `java.lang` 包里**占比最大**的部分。它们没有任何特殊待遇，必须按照标准的面向对象流程：**先实例化，再使用**。

* **原理：** 标准的类定义，有 public 构造方法，无语法糖支持。
* **代表类：** `StringBuilder`, `StringBuffer`, `Thread`, `Object`

```java
// --- StringBuilder (字符串构建) ---
// ❌ 错误：不能像 String 那样直接赋值
// StringBuilder sb = "abc";

// ✅ 正确：必须实例化
StringBuilder sb = new StringBuilder();
sb.append("abc");


// --- Thread (线程) ---
// ✅ 正确：必须实例化
Thread t = new Thread();
t.start();


// --- Object (基类) ---
// ✅ 正确：必须实例化
Object obj = new Object();

```

---

## 3. 极简总结表 (Summary Matrix)

| 分类 | 代表类 | 是否需要 import | 是否需要 new | 原因 |
| --- | --- | --- | --- | --- |
| **工具类** | `Math`, `System` | 否 | **不能** | 构造器私有，全静态方法 |
| **特权类** | `String`, `Integer` | 否 | **可选** (通常不写) | 语法糖支持 (字面量/自动装箱) |
| **普通类** | `StringBuilder`, `Thread` | 否 | **必须** | 标准对象，无特殊待遇 |

> **一句话口诀：**
> `java.lang` 只是让你少写了一行 `import`，并没有帮你省掉 `new`（除了 String 和包装类）。